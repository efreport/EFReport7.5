<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.efreport.mapper.RoleTemplateRelMapper">
  <!-- 新增 -->
  <insert id="save" parameterType="com.efreport.entity.RoleTemplateRel" >
    INSERT INTO SYS_ROLE_TEMPLATE_REL(role_id, tpl_id) VALUES(#{roleId}, #{tplId})
  </insert>

  <!-- 根据模板ID删除模板的角色 -->
  <insert id="remove" parameterType="Integer" >
    DELETE FROM SYS_ROLE_TEMPLATE_REL WHERE tpl_id = #{tplId}
  </insert>
  <!-- 根据角色ID获取所有模板角色 -->
  <select id="loadByRoleId" parameterType="Integer" resultType="com.efreport.entity.RoleTemplateRel">
    SELECT
      role_id AS roleId,
      tpl_id AS tplId
    FROM
      SYS_ROLE_TEMPLATE_REL
    WHERE
      role_id = #{roleId}
  </select>
  <!-- 根据模板ID获取所有角色 -->
  <select id="loadByTemplateId" parameterType="Integer" resultType="com.efreport.entity.RoleTemplateRel">
    SELECT
      role_id AS roleId,
      tpl_id AS tplId
    FROM
      SYS_ROLE_TEMPLATE_REL
    WHERE
      tpl_id = #{tplId}
  </select>

  <!-- 批量插入模板角色 -->
  <insert id="insertBatchRole" parameterType="java.util.List">
    INSERT INTO SYS_ROLE_TEMPLATE_REL (ROLE_ID,TPL_ID)
    VALUES
    <foreach collection="list" item="role" index="index" separator=",">
      (
      #{role.roleId}, #{role.tplId}
      )
    </foreach>
  </insert>

  <!-- 根据模板ID批量删除角色数据 -->
  <delete id="batchDelete" parameterType="java.util.List">
    DELETE FROM SYS_ROLE_TEMPLATE_REL WHERE TPL_ID IN
    <foreach collection="list" index="index" item="item"
             separator="," open="(" close=")">
      #{item.id}
    </foreach>
  </delete>

</mapper>
<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache, no-store">
    <meta http-equiv="expires" content="0">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="format-detection" content="adress=no">
    <link rel="stylesheet" href="../../js/css/layui.css">
    <link rel="stylesheet" href="../../js/css/json-viewer.css">
    <style type="text/css">
        .layui-input, .layui-textarea {
            display: block;
            width: 99%;
            padding-left: 10px;
        }

        #btn_add {
            width: 120px;
            height: 32px;
            background-image: url("../../images/new/btnadd.png");
            background-repeat: no-repeat;
            border: 0px !important;
            padding: 0px;
            margin: 0px;
        }

        .props {
            width: 25%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .layui-form-select dl dd.layui-this {
            background-color: #1e9fff;
            color: #fff;
        }

        .hover{
            background-color: #eee;
        }

    </style>
</head>
<body>
<div>
    <div class="layui-tab" style="margin:0px;">
        <ul class="layui-tab-title" id="mainTab">
            <li class="layui-this" id="props">印章配置</li>
        </ul>
        <div class="layui-tab-content" style="height:400px;">
            <div class="layui-tab-item layui-show">

                <form class="layui-form" action="">
                    <div class="layui-form-item">
                        <label class="layui-form-label">印章ID</label>
                        <div class="layui-input-block">
                            <input type="text" id="lockId" required lay-verify="required"
                                   placeholder="请输入印章ID"
                                   autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">印章方式</label>
                        <div class="layui-input-block">
                            <select id="lockType"  style="width:99%;">
                                <option value="0" selected>关键字</option>
                                <option value="1">坐标</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item" id="key">
                        <label class="layui-form-label">关键字</label>
                        <div class="layui-input-block">
                            <input type="text" id="lockKeyword" required lay-verify="required"
                                   placeholder="请输入关键字"
                                   autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" id="coordinate" style="display: none;">
                        <label class="layui-form-label">起始坐标点</label>
                        <div class="layui-input-block">
                            <input type="text" id="lockCord" required lay-verify="required"
                                   placeholder="请输入坐标,格式参考[0.5,0.5]"
                                   autocomplete="off" class="layui-input">
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
</body>
<script src="../../js/jquery-1.11.3.min.js"></script>
<script src="../../js/layui.js"></script>

<script type="text/javascript">
    let layer;
    let form;

    function init(a, b, c, d, e, f) {

        let option = f;
        let opJson = JSON.parse(option);

        $('#lockId').val(opJson.lockId);
        if(opJson.lockType == undefined){
            $('#lockType').val('0').prop('selected' , true);
            $('#lockKeyword').val('');
            $('#lockCord').val('');
        }else{
            $('#lockType').val(opJson.lockType).prop('selected' , true);
            if(opJson.lockType == '0'){
                $('#key').show();
                $('#coordinate').hide();
                $('#lockKeyword').val(opJson.key);
            }else{
                $('#key').hide();
                $('#coordinate').show();
                $('#lockCord').val(opJson.coordinate);
            }
        }


        layui.use('form', function () {
            form = layui.form;
            form.render();

            form.on('select()', function(data){
                let val = data.value;
                if(val == '0'){
                    $('#key').show();
                    $('#coordinate').hide();
                }else{
                    $('#key').hide();
                    $('#coordinate').show();
                }
            });
        });
    }

    layui.use('element', function () {
        let element = layui.element;
        $('#mainTab').on('click', function (title) {
            form.render();
        });
    });


    layui.use('layer', function () {
        layer = layui.layer;
    });
    /**
     * Created by whj on 2019/9/10.
     */
    let plugin = {
        optionJson: {
            lockId:'',
            lockType:0,
            keyword:'',
            coordinate:''
        },
        util: {
            isPositiveNumber: function (num) { //判断是否是正整数
                var g = /^[1-9]*[1-9][0-9]*$/;
                return g.test(num);
            },
            isNoNegativeNumber: function (num) {
                var g = /^[1-9]*[1-9][0-9]*$/;
                if (g.test(num)) {
                    return true;
                } else {
                    if (num == 0) {
                        return true;
                    } else {
                        return false;
                    }
                }
            },
            isPercentNumber: function (num) { //是否是百分整数
                var g = new RegExp(/^\d+%$/); //不包含小数
                //new RegExp(/^\d+\.{0,1}\d+%$/); //包含小数
                if (g.test(num)) {
                    return true;
                } else {
                    if (num == 0) {
                        return true;
                    } else {
                        return false;
                    }
                }
            },
            isRotateNumber: function (num) {
                var g = /^[1-9]*[1-9][0-9]*$/;
                var g1 = /^-[1-9]*[1-9][0-9]*$/;
                if (g.test(num)) { //是正整数
                    if (num <= 90) {
                        return true;
                    } else {
                        layer.alert("请输入-90到90间整数!");
                        return false;
                    }
                } else if (g1.test(num)) {
                    if (num >= -90) {
                        return true;
                    } else {
                        layer.alert("请输入-90到90间整数!");
                        return false;
                    }
                } else if (num == 0) {
                    return true;
                }
            },
        },
        bind: function () {

        },
        init: function () {

        },
        initTheme: function (theme) {

        },
        initByJson: function (json) {

        },
        initStyle: function (json) {

        }
    }

    function getOptions() {
        let option = {};
        option.lockId = $('#lockId').val();
        option.lockType = $('#lockType').val();
        option.key = $('#lockKeyword').val();
        option.coordinate = $('#lockCord').val();
        return option;
    }
</script>
</html>
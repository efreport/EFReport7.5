<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache, no-store">
    <meta http-equiv="expires" content="0">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="format-detection" content="adress=no">
    <link rel="stylesheet" type="text/css" href="../../js/css/plugin.css">
    <link rel="stylesheet" type="text/css" href="../../js/css/spectrum.css">
    <link rel="stylesheet" href="../../js/css/layui.css">
    <link rel="stylesheet" href="../../js/css/json-viewer.css">
</head>
<body>
<div>
    <div class="layui-tab" style="margin:0px;">
        <ul class="layui-tab-title" id="mainTab">
            <li class="layui-this">属性</li>
            <li>json</li>
            <li>扩展属性</li>
        </ul>
        <div class="layui-tab-content" style="height:400px;">

            <div class="layui-tab-item layui-show">
                <div class="plugin-container" style="height:400px;">
                    <div class="chart-panel" id="plugin"></div>
                    <!-- 备份Echart -->
                    <div class="chart-panel1" id="pluginBack" style="display: none;">

                    </div>
                    <div class="property-panel" style="height:400px;">
                        <div class="layui-tab">
                            <ul class="layui-tab-title" id="lay_expend" style="width: 20px;">
                                <li class="layui-this">标<br>题</li>
                                <li>图<br>例</li>
                                <li>网<br>格</li>
                                <li>数<br>据</li>
                            </ul>
                            <div class="layui-tab-content" style="width: 100%;height:400px;padding:5px;">
                                <div class="layui-tab-item layui-show" id="title"
                                     style="overflow: auto;white-space: normal;height:390px;">
                                    <div id="chart" class="chart">
                                        <table style="width: 100%; display: table;">
                                            <tbody>
                                            <tr>
                                                <td style="width:100px;">控件主题</td>
                                                <td style="width:130px;"><select id="chartTheme">

                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>控件背景颜色</td>
                                                <td>
                                                    <div style="width: 100px;margin-right:5px;display:table-cell"><input
                                                            type="text"
                                                            id="chartBgInput"
                                                            style="margin-right:5px;" value="#ffffff00">
                                                    </div>
                                                    <div id="chartBg"
                                                         style="width: 80px; display: table-cell; height: 29px; border: 1px solid rgb(213, 213, 213); background-color: rgb(255, 255, 255);"></div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td style="width:100px;">显示标题</td>
                                                <td style="width:130px;"><select id="titleShow">
                                                    <option value="1">显示</option>
                                                    <option value="0">不显示</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>标题文本</td>
                                                <td><input type="text" id="titleText" autocomplete="off" value="销量图">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>背景颜色</td>
                                                <td>
                                                    <div style="width: 100px;margin-right:5px;display:table-cell"><input
                                                            type="text"
                                                            id="titleBgInput"
                                                            style="margin-right:5px;" value="#00000000">
                                                    </div>
                                                    <div id="titleBg"
                                                         style="width: 80px; display: table-cell; height: 29px; border: 1px solid rgb(213, 213, 213); background-color: rgb(255, 255, 255);"></div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>上边距</td>
                                                <td><input type="text" id="title-top" autocomplete="off"
                                                           class="position"
                                                           placeholder="" value="0"></td>
                                            </tr>
                                            <tr>
                                                <td>下边距</td>
                                                <td><input type="text" id="title-bottom" autocomplete="off"
                                                           class="position"
                                                           placeholder="" value="0"></td>
                                            </tr>
                                            <tr>
                                                <td>左边距</td>
                                                <td><input type="text" id="title-left" autocomplete="off"
                                                           class="position"
                                                           placeholder="" value="0"></td>
                                            </tr>
                                            <tr>
                                                <td>右边距</td>
                                                <td><input type="text" id="title-right" autocomplete="off"
                                                           class="position"
                                                           placeholder="" value="0"></td>
                                            </tr>

                                            <tr>
                                                <td>文本样式</td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>颜色</td>
                                                <td>
                                                    <div style="width: 100px;margin-right:5px;display:table-cell"><input
                                                            type="text"
                                                            id="titleColorInput"
                                                            style="margin-right:5px;"
                                                            value="#333333">
                                                    </div>
                                                    <div id="titleColor"
                                                         style="width: 80px; display: table-cell; height: 29px; border: 1px solid rgb(213, 213, 213); background-color: black;"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>字体风格</td>
                                                <td><select id="titleStyle">
                                                    <option value="normal">正常</option>
                                                    <option value="italic">斜体</option>
                                                    <option value="oblique">倾斜</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>字体粗细</td>
                                                <td><select id="titleWeight">
                                                    <option value="normal">正常</option>
                                                    <option value="bold" selected>加粗</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>字体名称</td>
                                                <td><select id="titleFont">
                                                    <option value="sans-serif">sans-serif</option>
                                                    <option value="serif">serif</option>
                                                    <option value="monospace">monospace</option>
                                                    <option value="Arial">Arial</option>
                                                    <option value="Microsoft YaHei">Microsoft YaHei</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>字体大小</td>
                                                <td><input type="text" autocomplete="off" id="titleSize" value="18">
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="layui-tab-item" id="legend"
                                     style="overflow: auto;white-space: normal;height:390px;">
                                    <div class="chart">
                                        <table style="width:100%;display:table;table-layout:fixed">
                                            <tbody>
                                            <tr>
                                                <td style="width:88px;">图例类型</td>
                                                <td style="width:114px;"><select id="legendType">
                                                    <option value="plain">普通图例</option>
                                                    <option value="scroll" selected>滚动翻页</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">列表布局</td>
                                                <td style="width:114px;"><select id="legendOrient">
                                                    <option value="horizontal">水平</option>
                                                    <option value="vertical">垂直</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>文本对齐</td>
                                                <td><select id="legendAlign">
                                                    <option value="auto">自动</option>
                                                    <option value="left">左</option>
                                                    <option value="right">右</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>显示图例</td>
                                                <td><select id="legendShow">
                                                    <option value="1" selected>显示</option>
                                                    <option value="0">不显示</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>背景颜色</td>
                                                <td>
                                                    <div style="width: 100px;margin-right:5px;display:table-cell">
                                                        <input type="text" id="legendBgInput" style="margin-right:5px;"
                                                               value="#00000000">
                                                    </div>
                                                    <div id="legendBg"
                                                         style="width: 80px; display: table-cell; height: 29px; border: 1px solid rgb(213, 213, 213); background-color: white;"></div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>上边距</td>
                                                <td><input type="text" autocomplete="off" id="legend-top"
                                                           class="position" value="0"></td>
                                            </tr>
                                            <tr>
                                                <td>下边距</td>
                                                <td><input type="text" autocomplete="off" id="legend-bottom"
                                                           class="position" value="0"></td>
                                            </tr>
                                            <tr>
                                                <td>左边距</td>
                                                <td><input type="text" autocomplete="off" id="legend-left"
                                                           class="position" value="center"></td>
                                            </tr>
                                            <tr>
                                                <td>右边距</td>
                                                <td><input type="text" autocomplete="off" id="legend-right"
                                                           class="position" value="0"></td>
                                            </tr>

                                            <tr>
                                                <td>文本样式</td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>颜色</td>
                                                <td>
                                                    <div style="width: 100px;margin-right:5px;display:table-cell">
                                                        <input type="text" id="legendColorInput"
                                                               style="margin-right:5px;" value="#333333">
                                                    </div>
                                                    <div id="legendColor"
                                                         style="width: 80px; display: table-cell; height: 29px; border: 1px solid rgb(213, 213, 213); background-color: black;"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>字体风格</td>
                                                <td><select id="legendStyle">
                                                    <option value="normal">正常</option>
                                                    <option value="italic">斜体</option>
                                                    <option value="oblique">倾斜</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>字体粗细</td>
                                                <td><select id="legendWeight">
                                                    <option value="normal">正常</option>
                                                    <option value="bold">加粗</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>字体名称</td>
                                                <td><select id="legendFamily">
                                                    <option value="sans-serif">sans-serif</option>
                                                    <option value="serif">serif</option>
                                                    <option value="monospace">monospace</option>
                                                    <option value="Arial">Arial</option>
                                                    <option value="Microsoft YaHei">Microsoft YaHei</option>
                                                </select></td>
                                            </tr>
                                            <tr>
                                                <td>字体大小</td>
                                                <td><input type="text" autocomplete="off" id="legendSize" value="12">
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="layui-tab-item" id="grid"
                                     style="overflow: auto;white-space: normal;height:390px;">
                                    <div class="chart">
                                        <table style="width: 100%;display:table;table-layout:fixed">
                                            <tr>
                                                <td style="width:88px;">显示网格</td>
                                                <td style="width:114px;">
                                                    <select id="gridShow">
                                                        <option value="1">显示</option>
                                                        <option value="0" selected>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>背景颜色</td>
                                                <td>
                                                    <div style="width: 100px;display:table-cell"><input type="text"
                                                                                                        id="gridBgInput"
                                                                                                        style="margin-right:5px;"
                                                                                                        value="#ffffff00">
                                                    </div>
                                                    <div id="gridBg"
                                                         style="width: 80px;display:table-cell;height:29px;border:1px solid #D5D5D5;"></div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>上边距</td>
                                                <td><input type="text" autocomplete="off" id="grid-top" class="position"
                                                           value="60"></td>
                                            </tr>
                                            <tr>
                                                <td>下边距</td>
                                                <td><input type="text" autocomplete="off" id="grid-bottom"
                                                           class="position" value="60"></td>
                                            </tr>
                                            <tr>
                                                <td>左边距</td>
                                                <td><input type="text" autocomplete="off" id="grid-left"
                                                           class="position" value="10%"></td>
                                            </tr>
                                            <tr>
                                                <td>右边距</td>
                                                <td><input type="text" autocomplete="off" id="grid-right"
                                                           class="position" value="10%"></td>
                                            </tr>

                                        </table>
                                    </div>
                                </div>
                                <div class="layui-tab-item" id="data"
                                     style="overflow: auto;white-space: normal;height:390px;">
                                    <div class="chart">

                                        <table style="width: 100%;display:table;table-layout:fixed">
                                            <tr>
                                                <td>数据来源</td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">数据来源</td>
                                                <td style="width:114px;">
                                                    <select id="dataSource">
                                                        <option value="cell" selected>单元格数据</option>
                                                        <option value="ds">数据集数据</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr id="dsTr" style="display:none;">
                                                <td style="width:88px;">数据集(一)</td>
                                                <td style="width:114px;">
                                                    <select id="ds">

                                                    </select>
                                                </td>
                                            <tr id="dsTr1" style="display:none;">
                                                <td style="width:88px;">数据集(二)</td>
                                                <td style="width:114px;">
                                                    <select id="ds1">

                                                    </select>
                                                </td>
                                            </tr>
                                            </tr>
                                            <tr>
                                                <td style="color:red;">分类(一)</td>
                                                <td></td>
                                            </tr>
                                            <tr id="categoryTr">
                                                <td style="width:88px;">数据</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="category"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr id="categoryFieldTr" style="display:none;">
                                                <td style="width:88px;">数据列</td>
                                                <td style="width:114px;">
                                                    <select id="categoryField">
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示X轴</td>
                                                <td style="width:114px;">
                                                    <select id="showX">
                                                        <option value=true selected>显示</option>
                                                        <option value=false>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">X轴颜色</td>
                                                <td style="width:114px;">
                                                    <div style="width: 100px;display:table-cell"><input type="text"
                                                                                                        id="xColorInput"
                                                                                                        style="margin-right:5px;"
                                                                                                        value="#ffffff00">
                                                    </div>
                                                    <div id="xColor"
                                                         style="width: 80px;display:table-cell;height:29px;border:1px solid #D5D5D5;"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">x轴单位</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="xAxisF"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">旋转角度</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="xLabelRotate"
                                                           class="position" value="0">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">字体大小</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="xLabelTextSize"
                                                           class="position" value="12">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示分隔线</td>
                                                <td style="width:114px;">
                                                    <select id="showSplit">
                                                        <option value=true>显示</option>
                                                        <option value=false selected>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否留白</td>
                                                <td style="width:114px;">
                                                    <select id="boundaryGap">
                                                        <option value=true selected>是</option>
                                                        <option value=false>否</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color:red;">分类(二)</td>
                                                <td></td>
                                            </tr>
                                            <tr id="categoryTr1">
                                                <td style="width:88px;">数据</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="category1"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr id="categoryFieldTr1" style="display:none;">
                                                <td style="width:88px;">数据列</td>
                                                <td style="width:114px;">
                                                    <select id="categoryField1">
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示X轴</td>
                                                <td style="width:114px;">
                                                    <select id="showX1">
                                                        <option value=true selected>显示</option>
                                                        <option value=false>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">X轴颜色</td>
                                                <td style="width:114px;">
                                                    <div style="width: 100px;display:table-cell"><input type="text"
                                                                                                        id="xColorInput1"
                                                                                                        style="margin-right:5px;"
                                                                                                        value="#ffffff00">
                                                    </div>
                                                    <div id="xColor1"
                                                         style="width: 80px;display:table-cell;height:29px;border:1px solid #D5D5D5;"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">x轴单位</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="xAxisF1"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">旋转角度</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="xLabelRotate1"
                                                           class="position" value="0">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">字体大小</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="xLabelTextSize1"
                                                           class="position" value="12">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color:red;">系列(一)</td>
                                                <td></td>
                                            </tr>
                                            <tr id="seriesTr">
                                                <td style="width:88px;">数据</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="series" class="position">
                                                </td>
                                            </tr>
                                            <tr id="seriesFieldTr" style="display:none;">
                                                <td style="width:88px;">数据列</td>
                                                <td style="width:114px;">
                                                    <select id="seriesField">
                                                    </select>
                                                </td>
                                            </tr>
                                          <!--  <tr>
                                                <td style="width:100px;">是否堆积</td>
                                                <td style="width:130px;">
                                                    <select id="stack">
                                                        <option value="normal" selected>否</option>
                                                        <option value="stack">是</option>
                                                    </select>
                                                </td>
                                            </tr>-->
                                            <tr>
                                                <td style="width:100px;">是否平滑曲线</td>
                                                <td style="width:130px;">
                                                    <select id="smooth">
                                                        <option value="normal" selected>否</option>
                                                        <option value="smooth">是</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示标签</td>
                                                <td style="width:114px;">
                                                    <select id="showLabel">
                                                        <option value=true>显示</option>
                                                        <option value=false selected>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2" style="color: red">{a}：系列名。{b}：数据名。{c}：数据值。{d}：百分比。示例：
                                                    {b} : {c} ({d}%)
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">标签格式</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="labelFormatter"
                                                           class="position" value="{c}">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示提示框</td>
                                                <td style="width:114px;">
                                                    <select id="showTip">
                                                        <option value=true>显示</option>
                                                        <option value=false selected>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color:red;">系列(二)</td>
                                                <td></td>
                                            </tr>
                                            <tr id="seriesTr1">
                                                <td style="width:88px;">数据</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="series1" class="position">
                                                </td>
                                            </tr>
                                            <tr id="seriesFieldTr1" style="display:none;">
                                                <td style="width:88px;">数据列</td>
                                                <td style="width:114px;">
                                                    <select id="seriesField1">
                                                    </select>
                                                </td>
                                            </tr>
                                           <!-- <tr>
                                                <td style="width:100px;">是否堆积</td>
                                                <td style="width:130px;">
                                                    <select id="stack1">
                                                        <option value="normal" selected>否</option>
                                                        <option value="stack">是</option>
                                                    </select>
                                                </td>
                                            </tr>-->
                                            <tr>
                                                <td style="width:100px;">是否平滑曲线</td>
                                                <td style="width:130px;">
                                                    <select id="smooth1">
                                                        <option value="normal" selected>否</option>
                                                        <option value="smooth">是</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示标签</td>
                                                <td style="width:114px;">
                                                    <select id="showLabel1">
                                                        <option value=true>显示</option>
                                                        <option value=false selected>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2" style="color: red">{a}：系列名。{b}：数据名。{c}：数据值。{d}：百分比。示例：
                                                    {b} : {c} ({d}%)
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">标签格式</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="labelFormatter1"
                                                           class="position" value="{c}">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color:red;">值(一)</td>
                                                <td></td>
                                            </tr>
                                            <tr id="valueTr">
                                                <td style="width:88px;">数据</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="value" class="position">
                                                </td>
                                            </tr>
                                            <tr id="valueFieldTr" style="display:none;">
                                                <td style="width:88px;">数据列</td>
                                                <td style="width:114px;">
                                                    <select id="valueField">
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示Y轴</td>
                                                <td style="width:114px;">
                                                    <select id="showY">
                                                        <option value=true selected>显示</option>
                                                        <option value=false>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">Y轴颜色</td>
                                                <td style="width:114px;">
                                                    <div style="width: 100px;display:table-cell"><input type="text"
                                                                                                        id="yColorInput"
                                                                                                        style="margin-right:5px;"
                                                                                                        value="#ffffff00">
                                                    </div>
                                                    <div id="yColor"
                                                         style="width: 80px;display:table-cell;height:29px;border:1px solid #D5D5D5;"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">y轴单位</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="yAxisF"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">旋转角度</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="yLabelRotate"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">字体大小</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="yLabelTextSize"
                                                           class="position" value="12">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示分隔线</td>
                                                <td style="width:114px;">
                                                    <select id="showSplitY">
                                                        <option value=true selected>显示</option>
                                                        <option value=false>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color:red;">值(二)</td>
                                                <td></td>
                                            </tr>
                                            <tr id="valueTr1">
                                                <td style="width:88px;">数据</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="value1" class="position">
                                                </td>
                                            </tr>
                                            <tr id="valueFieldTr1" style="display:none;">
                                                <td style="width:88px;">数据列</td>
                                                <td style="width:114px;">
                                                    <select id="valueField1">
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">是否显示Y轴</td>
                                                <td style="width:114px;">
                                                    <select id="showY1">
                                                        <option value=true selected>显示</option>
                                                        <option value=false>不显示</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">Y轴颜色</td>
                                                <td style="width:114px;">
                                                    <div style="width: 100px;display:table-cell"><input type="text"
                                                                                                        id="yColorInput1"
                                                                                                        style="margin-right:5px;"
                                                                                                        value="#ffffff00">
                                                    </div>
                                                    <div id="yColor1"
                                                         style="width: 80px;display:table-cell;height:29px;border:1px solid #D5D5D5;"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">y轴单位</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="yAxisF1"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">旋转角度</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="yLabelRotate1"
                                                           class="position">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width:88px;">字体大小</td>
                                                <td style="width:114px;">
                                                    <input type="text" autocomplete="off" id="yLabelTextSize1"
                                                           class="position" value="12">
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="layui-tab-item">
                <div class="json-container">

                </div>
            </div>
            <div class="layui-tab-item">
                <div class="extend-container">
                    <textarea type="text" id="code" cols="107" rows="25" style="resize: none"></textarea>
                </div>
            </div>

        </div>
    </div>
</div>
</body>
<script src="../../js/jquery-1.11.3.min.js"></script>
<script src="../../js/echarts-4.1.0.min.js"></script>
<script src="../../js/layui.js"></script>
<script src="../../js/spectrum.js"></script>
<script src="../../js/json-viewer.js"></script>

<script type="text/javascript">
    var layer;
    var dsArray = [];//{"ds1":"a,b,c","ds2":"a,b,c,d"}
    var dsMap = {};
    var templateIndex;
    var base;
    var fonts = [];
    var option;
    function init(ip, dsA, index, font, dMap, opt , isFirst) {
        base = ip;
        dsArray = dsA;
        templateIndex = index;
        fonts = font;
        dsMap = dMap;
        option = opt;

        $.each(dsArray, function (index, element) { //初始化所有DS
            $('#ds').append('<option value="' + element + '">' + element + '</option>');
            $('#ds1').append('<option value="' + element + '">' + element + '</option>');
        });

        var ds1 = dsArray[0];
        $('#ds').val(ds1).prop("selected", true); //选中第一个结果集
        let key = templateIndex + '@#' + ds1;
        let dsField = dsMap[key];
        if (dsField != undefined) { //当前报表包含数据集时
            var dsFields = dsField;
            $('#categoryField').append('<option value=""></option>');
            $('#categoryField1').append('<option value=""></option>');
            $('#seriesField').append('<option value=""></option>');
            $('#seriesField1').append('<option value=""></option>');
            $.each(dsFields, function (index, element) { //初始化字段
                $('#categoryField').append('<option value="' + element + '">' + element + '</option>');
                $('#seriesField').append('<option value="' + element + '">' + element + '</option>');
                $('#valueField').append('<option value="' + element + '">' + element + '</option>');
                $('#categoryField1').append('<option value="' + element + '">' + element + '</option>');
                $('#seriesField1').append('<option value="' + element + '">' + element + '</option>');
                $('#valueField1').append('<option value="' + element + '">' + element + '</option>');
            });
        }


        $('#titleFont').empty();
        $('#legendFamily').empty();
        $.each(fonts, function (index, element) {
            $('#titleFont').append('<option value="' + element + '">' + element + '</option>');
            $('#legendFamily').append('<option value="' + element + '">' + element + '</option>');
        });
        if(isFirst){
            plugin.init();
        }else{
            plugin.initByJson(option);
        }
    }
    layui.use('element', function () {
        var element = layui.element;
        $('#mainTab').on('click', function (title) {
            if (title.target.id == "json") {//切换到json tab 页面时
                $('.json-container').empty();
                $('.json-container').jsonViewer(plugin.instance.getOption());
            };
            if (title.target.id == "props") {
                plugin.reSetOption(); //添加自定义属性
            }
        });
    });
    layui.use('layer', function () {
        layer = layui.layer;
    });
    /**
     * Created by whj on 2019/9/10.
     */

    var plugin = {
        instance: {},  //Echart实例
        baInstance: {}, //备份实例
        optionJson: {},
        backUpJson: {}, //备份JSON
        defCode: {}, //扩展属性
        saveJson: {
            dataSource: 'cell',
            dsName: '',
            dsName1: '',
            categoryData: '',
            seriesData: '',
            valueData: '',
            categoryData1: '',
            seriesData1: '',
            valueData1: '',
            labelFormatter:'{c}',
            labelFormatter1:'{c}',
            theme: '' //主题
        }, //保存到内核的json
        util: {
            isPositiveNumber: function (num) { //判断是否是正整数
                var g = /^[1-9]*[1-9][0-9]*$/;
                return g.test(num);
            },
            isLeft: function (val) {
                if ($.inArray(val, ['left', 'center', 'right']) == -1) {
                    return false;
                } else {
                    return true;
                }
            },
            isTop: function (val) {
                if ($.inArray(val, ['top', 'middle', 'bottom']) == -1) {
                    return false;
                } else {
                    return true;
                }
            },
            isAuto: function (val) {
                if (val == 'auto') {
                    return true;
                } else {
                    return false;
                }
            },
            isNoNegativeNumber: function (num) {
                var g = /^[1-9]*[1-9][0-9]*$/;
                if (g.test(num)) {
                    return true;
                } else {
                    if (num == 0) {
                        return true;
                    } else {
                        return false;
                    }
                }
            },
            isPercentNumber: function (num) { //是否是百分整数
                var g = new RegExp(/^\d+%$/); //不包含小数
                //new RegExp(/^\d+\.{0,1}\d+%$/); //包含小数
                if (g.test(num)) {
                    return true;
                } else {
                    if (num == 0) {
                        return true;
                    } else {
                        return false;
                    }
                }
            },
            isRotateNumber: function (num) {
                var g = /^[1-9]*[1-9][0-9]*$/;
                var g1 = /^-[1-9]*[1-9][0-9]*$/;
                if (g.test(num)) { //是正整数
                    if (num <= 90) {
                        return true;
                    } else {
                        //layer.alert("请输入-90到90间整数!");
                        efalert(layer , "请输入-90到90间整数!");
                        return false;
                    }
                } else if (g1.test(num)) {
                    if (num >= -90) {
                        return true;
                    } else {
                        //layer.alert("请输入-90到90间整数!");
                        efalert(layer , "请输入-90到90间整数!");
                        return false;
                    }
                } else if (num == 0) {
                    return true;
                }
            },
            HexToRgba: function (val) {
                var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{8})$/;
                var sColor = val.toLowerCase();
                if (sColor && reg.test(sColor)) {
                    if (sColor.length === 4) {
                        var sColorNew = "#";
                        for (var i = 1; i < 4; i += 1) {
                            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
                        }
                        sColor = sColorNew;
                    }
                    //处理六位的颜色值
                    var sColorChange = [];
                    for (var i = 1; i < 9; i += 2) {
                        if (i < 7) {
                            sColorChange.push(parseInt("0x" + sColor.slice(i, i + 2)));
                        } else {
                            var number = parseInt("0x" + sColor.slice(i, i + 2));
                            sColorChange.push(number / 255);
                        }

                    }
                    return "RGBA(" + sColorChange.join(",") + ")";
                } else {
                    return sColor;
                }
            },
            HexToRgb: function (val) {
                var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
                var sColor = val.toLowerCase();
                if (sColor && reg.test(sColor)) {
                    if (sColor.length === 4) {
                        var sColorNew = "#";
                        for (var i = 1; i < 4; i += 1) {
                            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
                        }
                        sColor = sColorNew;
                    }
                    //处理六位的颜色值
                    var sColorChange = [];
                    for (var i = 1; i < 7; i += 2) {
                        sColorChange.push(parseInt("0x" + sColor.slice(i, i + 2)));
                    }
                    return "RGB(" + sColorChange.join(",") + ")";
                } else {
                    return sColor;
                }
            },

            RgbToHex: function (val) {
                var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
                if (/^(rgb|RGB)/.test(val)) {
                    var aColor = val.replace(/(?:\(|\)|rgb|RGB)*/g, "").split(",");
                    var strHex = "#";
                    for (var i = 0; i < aColor.length; i++) {
                        var hex = Number(aColor[i]).toString(16);
                        if (hex === "0") {
                            hex += hex;
                        }
                        strHex += hex;
                    }
                    if (strHex.length !== 7) {
                        strHex = val;
                    }
                    return strHex;
                } else if (reg.test(val)) {
                    var aNum = val.replace(/#/, "").split("");
                    if (aNum.length === 6) {
                        return val;
                    } else if (aNum.length === 3) {
                        var numHex = "#";
                        for (var i = 0; i < aNum.length; i += 1) {
                            numHex += (aNum[i] + aNum[i]);
                        }
                        return numHex;
                    }
                } else {
                    return val;
                }
            },
            RgbaToHex: function (val) {
                var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{8})$/;
                if (/^(rgba|RGBA)/.test(val)) {
                    var aColor = val.replace(/(?:\(|\)|rgba|RGBA)*/g, "").split(",");
                    var strHex = "#";
                    for (var i = 0; i < aColor.length; i++) {
                        if (i == 3) {
                            /* var hex = (Number(aColor[i]) * 255).toString(16);
                             if (hex === "0") {
                             hex += hex;
                             }*/
                            var hex = plugin.util.alphaToHex(Number(aColor[i]));
                            strHex += hex;
                        } else {
                            var hex = Number(aColor[i]).toString(16);
                            if (hex === "0") {
                                hex += hex;
                            }
                            strHex += hex;
                        }

                    }

                    //if(strHex.length !== 9){
                    //strHex = val;
                    //}
                    return strHex;
                } else if (reg.test(val)) {
                    var aNum = val.replace(/#/, "").split("");
                    if (aNum.length === 6) {
                        return val;
                    } else if (aNum.length === 3) {
                        var numHex = "#";
                        for (var i = 0; i < aNum.length; i += 1) {
                            numHex += (aNum[i] + aNum[i]);
                        }
                        return numHex;
                    }
                } else {
                    return val;
                }
            },
            CheckIsHex6: function (bgVal) {
                var type = "^#[0-9a-fA-F]{6}$";
                var re = new RegExp(type);
                if (bgVal.match(re) == null) {
                    type = "^[rR][gG][Bb][\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[\)]{1}$";
                    re = new RegExp(type);
                    if (bgVal.match(re) == null) {
                        return false;
                    } else {
                        return true;
                    }
                } else {
                    return true;
                }
            },
            CheckIsHex8: function (bgVal) {
                var type = "^#[0-9a-fA-F]{8}$";
                var re = new RegExp(type);
                if (bgVal.match(re) == null) {
                    type = "^[rR][gG][Bb][\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[\)]{1}$";
                    re = new RegExp(type);
                    if (bgVal.match(re) == null) {
                        return false;
                    } else {
                        return true;
                    }
                } else {
                    return true;
                }
            },
            alphaToHex: function (val) {
                var num = val * 255;
                if(num == 0){
                    return '00';
                }else{
                    return (Math.round(num)).toString(16)
                }

            }

        },
        colors: [
            ["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)", "rgb(204, 204, 204)", "rgb(217, 217, 217)", "rgb(255, 255, 255)"],
            ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)", "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"],
            ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)",
                "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)",
                "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)", "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)",
                "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)", "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]
        ],
        colorOpt: {
            allowEmpty: true,
            showInput: true,
            containerClassName: "full-spectrum",
            showInitial: true,
            showPalette: true,
            showSelectionPalette: false,
            showAlpha: true,
            maxPaletteSize: 10,
            preferredFormat: "hex",

            change: function (color) { //修改title的背景颜色
                var hexColor = "transparent";

                if (color) {
                    if (color.alpha == 1) {
                        hexColor = color.toHexString();
                    } else {
                        hexColor = color.toHexString() + plugin.util.alphaToHex(color.alpha) ;
                    }

                    $(this).css("background-color", hexColor);
                    $(this).prev().find('input').val(hexColor);
                    if ($(this).attr('id') == 'titleBg') {
                        plugin.title.changeBgColor(plugin.util.HexToRgba(hexColor)); //将Hex转为rgb数据
                    } else if ($(this).attr('id') == 'titleColor') {
                        plugin.title.changeTitleColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'legendBg') {
                        plugin.legend.changeBgColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'legendColor') {
                        plugin.legend.changeTitleColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'gridBg') {
                        plugin.grid.changeBgColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'chartBg') {
                        plugin.changeBgColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'xColor') {
                        plugin.category.xColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'yColor') {
                        plugin.value.yColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'labelColor') {
                        plugin.series.labelColor(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'xColor1') {
                        plugin.category.xColor1(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'yColor1') {
                        plugin.value.yColor1(plugin.util.HexToRgba(hexColor));
                    } else if ($(this).attr('id') == 'labelColor1') {
                        plugin.series.labelColor1(plugin.util.HexToRgba(hexColor));
                    }
                }
            },
            beforeShow: function () {

            },
            hide: function () {

            },
            palette: this.colors
        },
        initColorPlugin: function (id) {  //初始化颜色选择控件
            $('#' + id).spectrum(this.colorOpt);
        },
        extendOption: function () {
            var code = $('#code').val();
            if (code == "") { //删除自定义属性
                var option = plugin.instance.getOption(); //Echart Option
                var defOption = plugin.defCode; //扩展Option
                //defOption = JSON.parse(defOption);
                $(Object.keys(defOption)).each(function (idx, e) { //遍历扩展属性
                    delete option[e];
                });
                delete option['defCode']; //删除自定义属性
                plugin.instance.setOption(option, true);
                plugin.defCode = {};


            } else {
                var obj = JSON.parse(code);//格式化字符串
                plugin.instance.setOption(obj);//设置属性
                plugin.instance.setOption({ //将代码作为自定义属性保存进Echart的Option
                    defCode: code
                })
                plugin.defCode = obj;
            }
        },
        reSetOption: function () {
            var code = $('#code').val(); //获取自定义属性
            if (code == "") { //删除自定义属性
                plugin.instance.clear(); //清空实例对象
                plugin.instance.setOption(plugin.baInstance.getOption()); //重新初始化实例
            } else {
                var obj = JSON.parse(code);//格式化字符串
                plugin.instance.clear();
                var baOption = plugin.baInstance.getOption();
                var background = baOption['backgroundColor']; //获取背景色
                if (background != undefined) {
                    delete background['__canvasGradient'];
                }
                plugin.instance.setOption(baOption);//设置基础属性
                plugin.instance.setOption(obj); //设置扩展属性
                plugin.instance.setOption({ //将代码作为自定义属性保存进Echart的Option
                    defCode: code
                })
                plugin.defCode = obj;
            }
        },
        bind: function () {

            plugin.initColorPlugin('titleBg');
            plugin.initColorPlugin('titleColor');
            plugin.initColorPlugin('legendBg');
            plugin.initColorPlugin('legendColor');
            plugin.initColorPlugin('gridBg');
            plugin.initColorPlugin('chartBg');
            plugin.initColorPlugin('xColor');
            plugin.initColorPlugin('yColor');
            plugin.initColorPlugin('labelColor');
            plugin.initColorPlugin('xColor1');
            plugin.initColorPlugin('yColor1');
            plugin.initColorPlugin('labelColor1');


            $('#stack').bind('change', function () {  //设置平滑属性
                        var type = $(this).val();
                        if (type == 'stack') {
                            plugin.series.changeStack(type, $('#stack1').val());
                            plugin.instance.setOption({
                                stack: 'true'
                            });
                            plugin.baInstance.setOption({
                                stack: 'true'
                            });
                        } else if (type == 'normal') {
                            var option = plugin.instance.getOption();
                            var series = option['series']; //系列数据
                            $.each(series, function (index, ele) { //遍历系列数据
                                delete ele['stack'];
                            });
                            option['stack'] = 'false';

                            plugin.instance.setOption(option, true); //重新设置option

                            var option1 = plugin.baInstance.getOption();
                            var series1 = option1['series']; //系列数据
                            $.each(series1, function (index, ele) { //遍历系列数据
                                delete ele['stack'];
                            });
                            option1['stack'] = 'false';

                            plugin.baInstance.setOption(option1, true); //重新设置option

                            plugin.series.changeStack('normal' , $('#stack1').val());

                        }
                    }
            )

            $('#stack1').bind('change', function () {  //设置平滑属性
                        var type = $(this).val();
                        if (type == 'stack') {

                            plugin.series.changeStack1(type);
                            plugin.instance.setOption({
                                stack1: 'true'
                            });
                            plugin.baInstance.setOption({
                                stack1: 'true'
                            });
                        } else if (type == 'normal') {
                            var option = plugin.instance.getOption();
                            /*$(Object.keys(option)).each(function (idx, e) { //遍历属性*/
                            /* if (e == 'series') {*/
                            var series = option['series']; //系列数据
                            $.each(series, function (index, ele) { //遍历系列数据
                                delete ele['stack'];
                            });
                            option['stack1'] = 'false';
                            plugin.instance.setOption(option, true); //重新设置option

                            var option1 = plugin.baInstance.getOption();
                            /*$(Object.keys(option)).each(function (idx, e) { //遍历属性*/
                            /* if (e == 'series') {*/
                            var series1 = option1['series']; //系列数据
                            $.each(series1, function (index, ele) { //遍历系列数据
                                delete ele['stack'];
                            });
                            option1['stack1'] = 'false';
                            plugin.baInstance.setOption(option1, true); //重新设置option

                            plugin.series.changeStack($('#stack').val() , 'normal');

                        }
                    }
            )


            $('#stack').bind('change', function () {  //设置平滑属性
                        var type = $(this).val();
                        if (type == 'stack') {
                            plugin.series.changeLineType(type, $('#smooth1').val());
                            plugin.instance.setOption({
                                smooth: 'true'
                            });
                            plugin.baInstance.setOption({
                                smooth: 'true'
                            });
                        } else if (type == 'normal') {
                            var option = plugin.instance.getOption();
                            var series = option['series']; //系列数据
                            $.each(series, function (index, ele) { //遍历系列数据
                                delete ele['smooth'];
                            });
                            option['smooth'] = 'false';

                            plugin.instance.setOption(option, true); //重新设置option

                            var option1 = plugin.baInstance.getOption();
                            var series1 = option1['series']; //系列数据
                            $.each(series1, function (index, ele) { //遍历系列数据
                                delete ele['smooth'];
                            });
                            option1['smooth'] = 'false';

                            plugin.baInstance.setOption(option1, true); //重新设置option

                            plugin.series.changeLineType('normal');

                        }
                    }
            )

            $('#smooth1').bind('change', function () {  //设置平滑属性
                        var type = $(this).val();
                        if (type == 'smooth') {

                            plugin.series.changeLineType1(type);
                            plugin.instance.setOption({
                                smooth1: 'true'
                            });
                            plugin.baInstance.setOption({
                                smooth1: 'true'
                            });
                        } else if (type == 'normal') {
                            var option = plugin.instance.getOption();
                            /*$(Object.keys(option)).each(function (idx, e) { //遍历属性*/
                            /* if (e == 'series') {*/
                            var series = option['series']; //系列数据
                            $.each(series, function (index, ele) { //遍历系列数据
                                delete ele['smooth1'];
                            });
                            option['smooth1'] = 'false';
                            plugin.instance.setOption(option, true); //重新设置option

                            var option1 = plugin.baInstance.getOption();
                            /*$(Object.keys(option)).each(function (idx, e) { //遍历属性*/
                            /* if (e == 'series') {*/
                            var series1 = option1['series']; //系列数据
                            $.each(series1, function (index, ele) { //遍历系列数据
                                delete ele['smooth1'];
                            });
                            option1['smooth1'] = 'false';
                            plugin.baInstance.setOption(option1, true); //重新设置option

                            plugin.series.changeLineType1('normal');

                        }
                    }
            )


            $('#code').bind('change', function () { //自定义代码,以键值对的形式存在

                /* var codeJson ="{" + code + "}"; //将字符转化成JSON格式的代码*/

            });

            $('#titleShow').bind('change', function () {
                if ($(this).val() == '0') {
                    plugin.title.isVisible(false);
                } else {
                    plugin.title.isVisible(true);
                }
            });
            $('#legendShow').bind('change', function () {
                if ($(this).val() == '0') {
                    plugin.legend.isVisible(false);
                } else {
                    plugin.legend.isVisible(true);
                }
            });
            $('#gridShow').bind('change', function () {
                if ($(this).val() == '0') {
                    plugin.grid.isVisible(false);
                } else {
                    plugin.grid.isVisible(true);
                }
            });

            $('#titleText').bind('change', function () {
                plugin.title.changeText($(this).val());
            });

            $('#titleSize').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.title.changeTitleSize($(this).val());
                } else {
                    //layer.alert("请输入正确的数字!");
                    efalert(layer , "请输入正确的数字!");
                }
            });

            $('#chartBgInput').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.changeBgColor(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.changeBgColor(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    //layer.alert("请输入正确的颜色!");
                    efalert(layer , "请输入正确的颜色!");

                }

            });
            $('#titleBgInput').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.title.changeBgColor(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.title.changeBgColor(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");

                }

            });


            $('#xColorInput').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.category.xColor(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.category.xColor(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");

                }

            });
            $('#yColorInput').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.value.yColor(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.value.yColor(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");
                }

            });


            $('#xColorInput1').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.category.xColor1(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.category.xColor1(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");
                }

            });
            $('#yColorInput1').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.value.yColor1(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.value.yColor1(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");
                }

            });

            $('#labelColorInput').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.series.labelColor(plugin.util.HexToRgb($(this).val()));
                    plugin.instance.setOption({
                        labelColor: plugin.util.HexToRgb($(this).val())
                    })
                    plugin.baInstance.setOption({
                        labelColor: plugin.util.HexToRgb($(this).val())
                    })
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.series.labelColor(plugin.util.HexToRgba($(this).val()));
                    plugin.instance.setOption({
                        labelColor: plugin.util.HexToRgb(plugin.util.HexToRgba($(this).val()))
                    })
                    plugin.baInstance.setOption({
                        labelColor: plugin.util.HexToRgb($(this).val())
                    })
                }
                else {
                    layer.alert("请输入正确的颜色!");
                }

            });

            $('#labelSize').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.series.labelSize($(this).val());
                    plugin.instance.setOption({
                        labelSize: $(this).val()
                    })
                    plugin.baInstance.setOption({
                        labelSize: $(this).val()
                    })
                } else {
                    layer.alert("请输入正确的数字!");
                }
            });


            $('#legendBgInput').bind('change', function () {
                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.legend.changeBgColor(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.legend.changeBgColor(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");
                }

            });
            $('#gridBgInput').bind('change', function () {

                if (plugin.util.CheckIsHex6($(this).val())) {
                    plugin.grid.changeBgColor(plugin.util.HexToRgb($(this).val()));
                } else if (plugin.util.CheckIsHex8($(this).val())) {
                    plugin.grid.changeBgColor(plugin.util.HexToRgba($(this).val()));
                }
                else {
                    layer.alert("请输入正确的颜色!");
                }
            });


            $('#grid-top').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isTop($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.grid.changeTop($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.grid.changeTop($(this).val());
                }
            });
            $('#grid-bottom').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.grid.changeBottom($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.grid.changeBottom($(this).val());
                }
            });
            $('#grid-left').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isLeft($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.grid.changeLeft($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.grid.changeLeft($(this).val());
                }
            });
            $('#grid-right').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.grid.changeRight($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.grid.changeRight($(this).val());
                }
            });

            $('#legendSize').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.legend.changeTitleSize($(this).val());
                } else {
                    //layer.alert("请输入正确的数字!");
                    efalert(layer , "请输入正确的数字!");
                }
            });
            $('#title-top').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isTop($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.title.changeTop($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.title.changeTop($(this).val());
                }
            });
            $('#title-bottom').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.title.changeBottom($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.title.changeBottom($(this).val());
                }
            });
            $('#title-left').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isLeft($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.title.changeLeft($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.title.changeLeft($(this).val());
                }
            });
            $('#title-right').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.title.changeRight($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.title.changeRight($(this).val());
                }
            });
            $('#titleStyle').bind('change', function () {
                plugin.title.changeFontStyle($(this).val());
            });
            $('#titleFont').bind('change', function () {
                plugin.title.changeFont($(this).val());
            })
            $('#legendStyle').bind('change', function () {
                plugin.legend.changeFontStyle($(this).val());
            });
            $('#titleWeight').bind('change', function () {
                plugin.title.changeFontWeight($(this).val());
            });
            $('#legendWeight').bind('change', function () {
                plugin.legend.changeFontWeight($(this).val());
            });

            $('#legendOrient').bind('change', function () {
                plugin.legend.changeOrient($(this).val());
            });

            $('#legendType').bind('change', function () {
                plugin.legend.changeType($(this).val());
            })

            $('#legendAlign').bind('change', function () {
                plugin.legend.changeAlign($(this).val());
            });

            $('#legendFamily').bind('change', function () {
                plugin.legend.changeFont($(this).val());
            });

            $('#legend-top').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isTop($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.legend.changeTop($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.legend.changeTop($(this).val());
                }
            });
            $('#legend-bottom').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.legend.changeBottom($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.legend.changeBottom($(this).val());
                }
            });
            $('#legend-left').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val()) || plugin.util.isLeft($(this).val())) {
                    plugin.legend.changeLeft($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.legend.changeLeft($(this).val());
                }
            });
            $('#legend-right').bind('change', function () {
                if (plugin.util.isNoNegativeNumber($(this).val()) || plugin.util.isPercentNumber($(this).val()) || plugin.util.isAuto($(this).val())) {
                    plugin.legend.changeRight($(this).val());
                } else {
                    $(this).val('auto');
                    plugin.legend.changeRight($(this).val());
                }
            });


            $('#showX').bind('change', function () {
                plugin.category.showX($(this).val());
            });

            $('#showX1').bind('change', function () {
                plugin.category.showX1($(this).val());
            });


            $('#xLabelRotate').bind('change', function () {
                if (plugin.util.isRotateNumber($(this).val())) {
                    plugin.category.xLabelRotate($(this).val());
                }
            })

            $('#xLabelRotate1').bind('change', function () {
                if (plugin.util.isRotateNumber($(this).val())) {
                    plugin.category.xLabelRotate1($(this).val());
                }
            })


            $('#xLabelTextSize').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.category.xLabelTextSize($(this).val());
                } else {
                    //layer.alert('请输入正确的数值');
                    efalert(layer , "请输入正确的数字!");
                }
            })

            $('#xLabelTextSize1').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.category.xLabelTextSize1($(this).val());
                } else {
                    //layer.alert('请输入正确的数值');
                    efalert(layer , "请输入正确的数字!");
                }
            })

            $('#showY').bind('change', function () {
                plugin.value.showY($(this).val());
            });

            $('#showY1').bind('change', function () {
                plugin.value.showY1($(this).val());
            });

            $('#yPosition').bind('change', function () {
                plugin.value.yPosition($(this).val());
            })

            $('#yLabelRotate').bind('change', function () {
                if (plugin.util.isRotateNumber($(this).val())) {
                    plugin.value.yLabelRotate($(this).val());
                }
            })

            $('#yLabelRotate1').bind('change', function () {
                if (plugin.util.isRotateNumber($(this).val())) {
                    plugin.value.yLabelRotate1($(this).val());
                }
            })

            $('#yLabelTextSize').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.value.yLabelTextSize($(this).val());
                } else {
                    layer.alert('请输入正确的数值');
                }
            })

            $('#yLabelTextSize1').bind('change', function () {
                if (plugin.util.isPositiveNumber($(this).val())) {
                    plugin.value.yLabelTextSize1($(this).val());
                } else {
                    layer.alert('请输入正确的数值');
                }
            })

            $('#category').bind('change', function () { //分类
                plugin.saveJson.categoryData = $(this).val();
            })

            $('#category1').bind('change', function () { //分类
                plugin.saveJson.categoryData1 = $(this).val();
            })

            $('#series').bind('change', function () { //系列
                plugin.saveJson.seriesData = $(this).val();
            })
            $('#series1').bind('change', function () { //系列
                plugin.saveJson.seriesData1 = $(this).val();
            })

            $('#value').bind('change', function () { //值
                plugin.saveJson.valueData = $(this).val();
            })

            $('#value1').bind('change', function () { //值
                plugin.saveJson.valueData1 = $(this).val();
            })


            $('#showLabel').bind('change', function () { //是否显示标签
                plugin.series.showLabel($(this).val());
                plugin.instance.setOption({
                    showSeriesLabel: $(this).val()
                })
                plugin.baInstance.setOption({
                    showSeriesLabel: $(this).val()
                })
            })

            $('#labelFormatter').bind('change', function () {
                plugin.series.formatter($(this).val());
                plugin.saveJson.labelFormatter = $(this).val();
            })

            $('#showLabel1').bind('change', function () { //是否显示标签
                plugin.series.showLabel1($(this).val());
                plugin.instance.setOption({
                    showSeriesLabel1: $(this).val()
                })
                plugin.baInstance.setOption({
                    showSeriesLabel1: $(this).val()
                })
            })

            $('#labelFormatter1').bind('change', function () {
                plugin.series.formatter1($(this).val());
                plugin.saveJson.labelFormatter1 = $(this).val();
            })

            $('#showTip').bind('change', function () {
                plugin.toolTip.show($(this).val());
            })

            $('#showSplit').bind('change', function () {
                plugin.category.showSplit($(this).val());
            })

            $('#boundaryGap').bind('change', function () {
                plugin.category.boundaryGap($(this).val());
            })

            $('#showSplitY').bind('change', function () {
                plugin.value.showSplitY($(this).val());
            })


            $('#categoryField').bind('change', function () {//字段切换事件
                plugin.saveJson.categoryData = $(this).val();
            });

            $('#seriesField').bind('change', function () {//字段切换事件
                plugin.saveJson.seriesData = $(this).val();
            });

            $('#valueField').bind('change', function () {//字段切换事件
                plugin.saveJson.valueData = $(this).val();
            });

            $('#categoryField1').bind('change', function () {//字段切换事件
                plugin.saveJson.categoryData1 = $(this).val();
            });

            $('#seriesField1').bind('change', function () {//字段切换事件
                plugin.saveJson.seriesData1 = $(this).val();
            });

            $('#valueField1').bind('change', function () {//字段切换事件
                plugin.saveJson.valueData1 = $(this).val();
            });

            $('#xAxisF').bind('change', function () {
                plugin.xAxis.axisLabel($(this).val());
            })

            $('#xAxisF1').bind('change', function () {
                plugin.xAxis.axisLabel1($(this).val());
            })

            $('#yAxisF').bind('change', function () {
                plugin.yAxis.axisLabel($(this).val());
            })

            $('#yAxisF1').bind('change', function () {
                plugin.yAxis.axisLabel1($(this).val());
            })

            $('#dataSource').bind('change', function () {//绑定数据来源事件

                var dataSource = $(this).val();
                if (dataSource == 'cell') { //如果来自于单元格

                    plugin.saveJson.dataSource = 'cell'; //设置数据来源

                    $('#dsTr').hide();
                    $('#dsTr1').hide();
                    $('#categoryFieldTr').hide();
                    $('#seriesFieldTr').hide();
                    $('#valueFieldTr').hide();
                    $('#categoryFieldTr1').hide();
                    $('#seriesFieldTr1').hide();
                    $('#valueFieldTr1').hide();
                    $('#categoryTr').show();
                    $('#seriesTr').show();
                    $('#valueTr').show();
                    $('#categoryTr1').show();
                    $('#seriesTr1').show();
                    $('#valueTr1').show();

                    plugin.saveJson.categoryData = $('#category').val(); //设置分类数据
                    plugin.saveJson.seriesData = $('#series').val(); //设置系列数据
                    plugin.saveJson.valueData = $('#value').val(); //设置结果数据

                    plugin.saveJson.categoryData1 = $('#category1').val(); //设置分类数据
                    plugin.saveJson.seriesData1 = $('#series1').val(); //设置系列数据
                    plugin.saveJson.valueData1 = $('#value1').val(); //设置结果数据
                } else {
                    plugin.saveJson.dataSource = 'ds'; //设置数据来源
                    $('#dsTr').show();
                    plugin.saveJson.dsName = $('#ds').val() //设置结果集
                    $('#categoryFieldTr').show();
                    plugin.saveJson.categoryData = $('#categoryField').val(); //设置分类数据
                    $('#seriesFieldTr').show();
                    plugin.saveJson.seriesData = $('#seriesField').val(); //设置系列数据
                    $('#valueFieldTr').show();
                    plugin.saveJson.valueData = $('#valueField').val(); //设置结果数据
                    $('#dsTr1').show();
                    plugin.saveJson.dsName1 = $('#ds1').val() //设置结果集
                    $('#categoryFieldTr1').show();
                    plugin.saveJson.categoryData1 = $('#categoryField1').val(); //设置分类数据
                    $('#seriesFieldTr1').show();
                    plugin.saveJson.seriesData1 = $('#seriesField1').val(); //设置系列数据
                    $('#valueFieldTr1').show();
                    plugin.saveJson.valueData1 = $('#valueField1').val(); //设置结果数据
                    $('#categoryTr').hide();
                    $('#seriesTr').hide();
                    $('#valueTr').hide();
                    $('#categoryTr1').hide();
                    $('#seriesTr1').hide();
                    $('#valueTr1').hide();
                }

            });

            $('#ds').bind('change', function () { //绑定结果集修改事件
                var dsName = $(this).val();
                plugin.saveJson.dsName = dsName; //修改结果集的值
                let key = templateIndex + '@#' + dsName;
                let field = dsMap[key]; //获取结果集的字段
                var fields = field;
                $('#categoryField').empty();
                $('#seriesField').empty();
                $('#valueField').empty();
                $('#categoryField').append('<option value=""></option>'); //分类可以为空
                $('#seriesField').append('<option value=""></option>'); //系列可以为空

                $.each(fields, function (index, element) {
                    $('#categoryField').append('<option value="' + element + '">' + element + '</option>');
                    $('#seriesField').append('<option value="' + element + '">' + element + '</option>');
                    $('#valueField').append('<option value="' + element + '">' + element + '</option>');
                    plugin.saveJson.categoryData = $('#categoryField').val(); //设置分类数据
                    plugin.saveJson.seriesData = $('#seriesField').val(); //设置系列数据
                    plugin.saveJson.valueData = $('#valueField').val(); //设置结果数据
                });
            });

            $('#ds1').bind('change', function () { //绑定结果集修改事件
                var dsName = $(this).val();
                plugin.saveJson.dsName1 = dsName; //修改结果集的值
                let key = templateIndex + '@#' + dsName;
                let field = dsMap[key]; //获取结果集的字段
                var fields = field;
                $('#categoryField1').empty();
                $('#seriesField1').empty();
                $('#valueField1').empty();
                $('#categoryField1').append('<option value=""></option>'); //分类可以为空
                $('#seriesField1').append('<option value=""></option>'); //系列可以为空
                $.each(fields, function (index, element) {
                    $('#categoryField1').append('<option value="' + element + '">' + element + '</option>');
                    $('#seriesField1').append('<option value="' + element + '">' + element + '</option>');
                    $('#valueField1').append('<option value="' + element + '">' + element + '</option>');
                    plugin.saveJson.categoryData1 = $('#categoryField1').val(); //设置分类数据
                    plugin.saveJson.seriesData1 = $('#seriesField1').val(); //设置系列数据
                    plugin.saveJson.valueData1 = $('#valueField1').val(); //设置结果数据
                });
            });

        },
        init: function () {
            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('plugin'));
            plugin.instance = myChart;
            plugin.instance.setOption(option);
            plugin.instance.setOption({
                animation: false
            });
            plugin.optionJson = option;
            plugin.instance.setOption({ //设置默认属性
                "theme": "default"
            })

            var baChart = echarts.init(document.getElementById('pluginBack')); //备份Echart
            plugin.baInstance = baChart;
            plugin.baInstance.setOption(option); //设置备份echart Option

            plugin.optionJson = option;
            $('.json-container').jsonViewer(option);
            plugin.bind();

            plugin.initTheme('default'); //初始化主题
        },
        initTheme: function (theme) {
            $.ajax({
                url: base + "/plugin/getThemes",
                type: "post",
                data: {"type": "DLine"},
                dataType: "json",
                success: function (res) {
                    var defaultOption = res.option; //默认option
                    if (res.state == 'failed') {
                        $('#chartTheme').append("<option>--无主题--</option>")
                    } else {
                        var themes = res.themes;
                        $('#chartTheme').append("<option value='default'>default</option>"); //添加默认主题
                        $.each(themes, function (index, element) {
                            $('#chartTheme').append("<option value='" + element.name + "'>" + element.name + "</option>")
                            $.getScript(element.src); //动态加载js
                        })
                        if (theme == undefined) {
                            $('#chartTheme').find('option:first').prop("selected", true);
                        } else {
                            $('#chartTheme').val(theme).prop("selected", true);
                        }


                        $('#chartTheme').bind("change", function () {
                            $('#xAxisF').val('');
                            $('#yAxisF').val('');
                            $('#xAxisF1').val('');
                            $('#yAxisF1').val('');
                            if ($(this).val() != 'none') { //修改主题后，重新初始化
                                var option = plugin.instance.getOption(); //获取当前实例的option
                                //var optionJson = plugin.optionJson;
                                plugin.instance.dispose(); //销毁当前实例
                                plugin.baInstance.dispose(); //销毁备份实例

                                //var myChart = echarts.init(document.getElementById('plugin') , "dark");
                                var myChart = echarts.init(document.getElementById('plugin'), $(this).val());
                                var baChart = echarts.init(document.getElementById('pluginBack'), $(this).val());
                                plugin.instance = myChart;
                                plugin.baInstance = baChart;
                                plugin.instance.setOption(defaultOption); //使用默认的option来初始化
                                plugin.baInstance.setOption(defaultOption)
                                plugin.instance.setOption({
                                    animation: false
                                });
                                plugin.baInstance.setOption({
                                    animation: false
                                });
                                plugin.optionJson = defaultOption;
                                plugin.backUpJson = defaultOption;
                                //设置默认数值
                                plugin.instance.setOption({
                                    "categoryData": '',
                                    "seriesData": '',
                                    "valueData": '',
                                    "categoryData1": '',
                                    "seriesData1": '',
                                    "valueData1": '',
                                    "theme": $(this).val()
                                });

                                //设置默认数值
                                plugin.baInstance.setOption({
                                    "categoryData": '',
                                    "seriesData": '',
                                    "valueData": '',
                                    "categoryData1": '',
                                    "seriesData1": '',
                                    "valueData1": '',
                                    "theme": $(this).val()
                                });

                                $('#code').val('');
                                $('#category').val(''); //清空数据
                                $('#series').val(''); //清空数据
                                $('#value').val('');
                                $('#category1').val(''); //清空数据
                                $('#series1').val(''); //清空数据
                                $('#value1').val('');
                                $('#chartType').val('normal').prop("selected", true); //默认控件类型
                                $('.json-container').jsonViewer(plugin.instance.getOption());
                                plugin.initStyle(plugin.instance.getOption());
                                plugin.bind();

                            }
                        });
                    }
                },
                error: function () {
                    //layer.alert("初始化Echart模板出错!");
                }

            })
        },
        initByJson: function (json) {
            var option = JSON.parse(json);
            var myChart = echarts.init(document.getElementById('plugin'));
            plugin.instance = myChart;
            plugin.instance.setOption(option);
            plugin.instance.setOption({
                animation: false
            });

            var baOption = option.backUpOption; //获取基础属性
            var baChart = echarts.init(document.getElementById('pluginBack')); //获取基础Echart
            plugin.baInstance = baChart;
            plugin.baInstance.setOption(baOption);
            plugin.baInstance.setOption({
                animation: false
            });

            var labelColor = option.labelColor;
            if (labelColor != undefined) {
                plugin.series.labelColor(labelColor);
            }

            var labelSize = option.labelSize;
            if (labelSize != undefined) {
                plugin.series.labelSize(labelSize);
            }

            plugin.optionJson = plugin.instance.getOption();
            $('.json-container').jsonViewer(plugin.optionJson);
            plugin.initStyle(option);
            plugin.initTheme(option.theme);
            plugin.bind();
        },
        initStyle: function (json) {
            //加载数据
            var dataSource = json.dataSource == undefined ? 'cell' : json.dataSource;//数据来源
            plugin.saveJson.dataSource = dataSource;

            var dsName = json.dsName == undefined ? '' : json.dsName; //数据集
            plugin.saveJson.dsName = dsName;

            var dsName1 = json.dsName1 == undefined ? '' : json.dsName1; //数据集
            plugin.saveJson.dsName1 = dsName1;

            var seriesData = json.seriesData == undefined ? '' : json.seriesData;
            plugin.saveJson.seriesData = seriesData;

            var categoryData = json.categoryData == undefined ? '' : json.categoryData;
            plugin.saveJson.categoryData = categoryData;

            var valueData = json.valueData == undefined ? '' : json.valueData;
            plugin.saveJson.valueData = valueData;

            var seriesData1 = json.seriesData1 == undefined ? '' : json.seriesData1;
            plugin.saveJson.seriesData1 = seriesData1;

            var categoryData1 = json.categoryData1 == undefined ? '' : json.categoryData1;
            plugin.saveJson.categoryData1 = categoryData1;

            var valueData1 = json.valueData1 == undefined ? '' : json.valueData1;
            plugin.saveJson.valueData1 = valueData1;

            var formatter = json.labelFormatter; //格式化
            if(formatter != undefined){
                plugin.saveJson.labelFormatter = formatter;
                plugin.series.formatter(formatter);
                var reg = new RegExp("&e&","g");//g,表示全部替换。
                formatter = formatter.replace(reg,"\\n");
                $('#labelFormatter').val(formatter);
            }else{
                $('#labelFormatter').val('{c}');
            }

            var formatter1 = json.labelFormatter1; //格式化
            if(formatter1 != undefined){
                plugin.saveJson.labelFormatter1 = formatter1;
                plugin.series.formatter1(formatter1);
                var reg = new RegExp("&e&","g");//g,表示全部替换。
                formatter1 = formatter1.replace(reg,"\\n");
                $('#labelFormatter1').val(formatter1);
            }else{
                $('#labelFormatter1').val('{c}');
            }


            if (dataSource == 'cell') {
                $('#dataSource').val(dataSource).prop('selected', true); //选中数据源
                $('#dsTr').hide();
                $('#dsTr1').hide();
                $('#categoryFieldTr').hide();
                $('#seriesFieldTr').hide();
                $('#valueFieldTr').hide();
                $('#categoryFieldTr1').hide();
                $('#seriesFieldTr1').hide();
                $('#valueFieldTr1').hide();
                $('#categoryTr').show();
                $('#seriesTr').show();
                $('#valueTr').show();
                $('#categoryTr1').show();
                $('#seriesTr1').show();
                $('#valueTr1').show();

                $('#category').val(categoryData);
                $('#series').val(seriesData);
                $('#value').val(valueData);

                $('#category1').val(categoryData1);
                $('#series1').val(seriesData1);
                $('#value1').val(valueData1);
            } else {
                $('#dataSource').val(dataSource).prop('selected', true);
                $('#dsTr').show();
                $('#ds').val(dsName).prop('selected', true); //选中结果集

                $('#dsTr1').show();
                $('#ds1').val(dsName1).prop('selected', true); //选中结果集
                //重新初始化下拉框
                let key = templateIndex + '@#' + dsName;
                let key1 = templateIndex + '@#' + dsName1;
                //重新初始化下拉框
                let fields = dsMap[key];
                let fields1 = dsMap[key1];
                /*
                 * 当在设计器上修改结果集名称后，根据option里面的DSName可能会找不到对应的Field，针对这种情况，将报表还原为单元格取数 whj
                 * */
                if (fields == undefined) {

                    $('#dataSource').val('cell').prop('selected', true); //选中数据源
                    $('#dsTr').hide();
                    $('#dsTr1').hide();
                    $('#categoryFieldTr').hide();
                    $('#seriesFieldTr').hide();
                    $('#valueFieldTr').hide();

                    $('#categoryFieldTr1').hide();
                    $('#seriesFieldTr1').hide();
                    $('#valueFieldTr1').hide();

                    $('#categoryTr').show();
                    $('#seriesTr').show();
                    $('#valueTr').show();

                    $('#categoryTr1').show();
                    $('#seriesTr1').show();
                    $('#valueTr1').show();


                    $('#category').val('');
                    $('#series').val('');
                    $('#value').val('');

                    $('#category1').val('');
                    $('#series1').val('');
                    $('#value1').val('');

                } else {

                    var dsFields = fields;
                    var dsFields1 = fields1;

                    $('#categoryField').empty();
                    $('#seriesField').empty(); //清空下拉框
                    $('#valueField').empty();

                    $('#categoryField').append('<option value=""></option>'); //分类可以为空
                    $('#seriesField').append('<option value=""></option>'); //系列可以为空

                    $('#categoryField1').empty();
                    $('#seriesField1').empty(); //清空下拉框
                    $('#valueField1').empty();

                    $('#categoryField1').append('<option value=""></option>'); //分类可以为空
                    $('#seriesField1').append('<option value=""></option>'); //系列可以为空

                    $.each(dsFields, function (index, element) { //初始化字段
                        $('#categoryField').append('<option value="' + element + '">' + element + '</option>');
                        $('#seriesField').append('<option value="' + element + '">' + element + '</option>');
                        $('#valueField').append('<option value="' + element + '">' + element + '</option>');
                    });

                    $.each(dsFields1, function (index, element) { //初始化字段
                        $('#categoryField1').append('<option value="' + element + '">' + element + '</option>');
                        $('#seriesField1').append('<option value="' + element + '">' + element + '</option>');
                        $('#valueField1').append('<option value="' + element + '">' + element + '</option>');
                    });

                    $('#categoryFieldTr').show();

                    $('#categoryField').val(categoryData).prop('selected', true);

                    $('#seriesFieldTr').show();

                    $('#seriesField').val(seriesData).prop('selected', true);

                    $('#valueFieldTr').show();

                    $('#valueField').val(valueData).prop('selected', true);

                    $('#categoryFieldTr1').show();

                    $('#categoryField1').val(categoryData1).prop('selected', true);

                    $('#seriesFieldTr1').show();

                    $('#seriesField1').val(seriesData1).prop('selected', true);

                    $('#valueFieldTr1').show();

                    $('#valueField1').val(valueData1).prop('selected', true);

                    $('#categoryTr').hide();
                    $('#seriesTr').hide();
                    $('#valueTr').hide();

                    $('#categoryTr1').hide();
                    $('#seriesTr1').hide();
                    $('#valueTr1').hide();
                }

            }

            var defCode = json.defCode; //自定义代码
            if (defCode != undefined) {
                $('#code').val(defCode);
                plugin.defCode = JSON.parse(defCode);
                plugin.instance.setOption(plugin.defCode);
                //plugin.baInstance.setOption(plugin.defCode);

            }

            var chartType = json.chartType; //插件类型
            if (chartType != undefined) {
                if (chartType == 'stack') {
                    $('#chartType').val('stack').prop("selected", true);
                }
            }

            var chartBg = json.backgroundColor;

            if (chartBg == undefined) {
                $('#chartBgInput').val("#ffffff00");//标题背景颜色
                $('#chartBg').css("background-color", "#ffffff00");
            } else {
                if ($.isPlainObject(chartBg)) { //判断是否是对象
                    //如果是对象，采用默认设置
                    $('#chartBgInput').val("#ffffff00");//标题背景颜色
                    $('#chartBg').css("background-color", "#ffffff00");
                } else {
                    if (chartBg.indexOf('RGBA') == -1) {//标题背景颜色
                        if (chartBg.indexOf('rgba') == -1) {
                            $('#chartBgInput').val(plugin.util.RgbToHex(chartBg));//标题背景颜色
                            $('#chartBg').css("background-color", plugin.util.RgbToHex(chartBg));
                        } else {
                            $('#chartBgInput').val(plugin.util.RgbaToHex(chartBg));//标题背景颜色
                            $('#chartBg').css("background-color", plugin.util.RgbaToHex(chartBg));
                        }

                    } else {
                        $('#chartBgInput').val(plugin.util.RgbaToHex(chartBg));//标题背景颜色
                        $('#chartBg').css("background-color", plugin.util.RgbaToHex(chartBg));
                    }
                }
            }

            var title = json.title[0];
            $('#titleText').val(title.text); //标题
            //$('#titleBgInput').val(plugin.util.RgbToHex(title.backgroundColor));//标题背景颜色
            //$('#titleBg').spectrum("set", plugin.util.RgbToHex(title.backgroundColor));
            //$('#titleBg').css("background-color" , plugin.util.RgbToHex(title.backgroundColor));
            if (title.backgroundColor.indexOf('RGBA') == -1) {
                if (title.backgroundColor.indexOf('rgba') == -1) {
                    $('#titleBgInput').val(plugin.util.RgbToHex(title.backgroundColor));//标题背景颜色
                    $('#titleBg').css("background-color", plugin.util.RgbToHex(title.backgroundColor));
                } else {
                    $('#titleBgInput').val(plugin.util.RgbaToHex(title.backgroundColor));//标题背景颜色
                    $('#titleBg').css("background-color", plugin.util.RgbaToHex(title.backgroundColor));
                }
            } else {
                $('#titleBgInput').val(plugin.util.RgbaToHex(title.backgroundColor));//标题背景颜色
                $('#titleBg').css("background-color", plugin.util.RgbaToHex(title.backgroundColor));
            }

            $('#title-top').val(title.top == undefined ? 0 : title.top);
            $('#title-bottom').val(title.bottom == undefined ? 0 : title.bottom);
            $('#title-left').val(title.left == undefined ? 0 : title.left);
            $('#title-right').val(title.right == undefined ? 0 : title.right);


            if (title.show == true) {
                $('#titleShow').val("1").prop("selected", true); //是否显示标题
            } else {
                $('#titleShow').val("0").prop("selected", true); //是否显示标题
            }
            var textStyle = title.textStyle;
            $('#titleSize').val(textStyle.fontSize);
            var weight = textStyle.fontWeight;
            if (weight == 'normal') {
                $('#titleWeight').val('normal').prop("selected", true);
            } else {
                $('#titleWeight').val('bold').prop("selected", true);
            }

            if (textStyle.color.indexOf('RGBA') == -1) {
                if (textStyle.color.indexOf('rgba') == -1) {
                    $('#titleColorInput').val(plugin.util.RgbToHex(textStyle.color));
                    $('#titleColor').css("background-color", plugin.util.RgbToHex(textStyle.color));
                } else {
                    $('#titleColorInput').val(plugin.util.RgbaToHex(textStyle.color));
                    $('#titleColor').css("background-color", plugin.util.RgbaToHex(textStyle.color));
                }
            } else {
                $('#titleColorInput').val(plugin.util.RgbaToHex(textStyle.color));
                $('#titleColor').css("background-color", plugin.util.RgbaToHex(textStyle.color));
            }


            if (textStyle.fontStyle == undefined) {
                $('#titleStyle option:first').prop("selected", true);
            } else {
                $('#titleStyle').val(textStyle.fontStyle).prop("selected", true);
            }

            if (textStyle.fontFamily == undefined) {
                $('#titleFont option:first').prop("selected", true);
            } else {
                $('#titleFont').val(textStyle.fontFamily).prop("selected", true);
            }


            //图例
            var legend = json.legend[0];
            if (legend.show == true) {
                $('#legendShow').val("1").prop("selected", true); //是否显示图例
            } else {
                $('#legendShow').val("0").prop("selected", true); //是否显示图例
            }
            if (legend.backgroundColor.indexOf('RGBA') == -1) {
                if (legend.backgroundColor.indexOf('rgba') == -1) {
                    $('#legendBgInput').val(plugin.util.RgbToHex(legend.backgroundColor)) //图例背景颜色
                    $("#legendBg").css("background-color", plugin.util.RgbToHex(legend.backgroundColor));
                } else {
                    $('#legendBgInput').val(plugin.util.RgbaToHex(legend.backgroundColor)) //图例背景颜色
                    $("#legendBg").css("background-color", plugin.util.RgbaToHex(legend.backgroundColor));
                }

            } else {
                $('#legendBgInput').val(plugin.util.RgbaToHex(legend.backgroundColor)) //图例背景颜色
                $("#legendBg").css("background-color", plugin.util.RgbaToHex(legend.backgroundColor));
            }

            if (legend.orient == 'horizontal') { //图例布局
                $('#legendOrient').val("horizontal").prop("selected", true);
            } else {
                $('#legendOrient').val("vertical").prop("selected", true);
            }

            if (legend.type != undefined) { //图例类型
                $('#legendType').val(legend.type).prop("selected", true);
            }

            if (legend.align == 'auto') {//图例对齐方式
                $('#legendAlign').val("auto").prop("selected", true);
            } else if (legend.align == 'left') {
                $('#legendAlign').val("left").prop("selected", true);
            } else {
                $('#legendAlign').val("right").prop("selected", true);
            }
            //图例样式
            var legendStyle = legend.textStyle;
            if (legendStyle.color.indexOf('RGBA') == -1) {
                if (legendStyle.color.indexOf('rgba') == -1) {
                    $('#legendColorInput').val(plugin.util.RgbToHex(legendStyle.color));
                    $('#legendColor').css("background-color", plugin.util.RgbToHex(legendStyle.color));
                } else {
                    $('#legendColorInput').val(plugin.util.RgbaToHex(legendStyle.color));
                    $('#legendColor').css("background-color", plugin.util.RgbaToHex(legendStyle.color));
                }

            } else {
                $('#legendColorInput').val(plugin.util.RgbaToHex(legendStyle.color));
                $('#legendColor').css("background-color", plugin.util.RgbaToHex(legendStyle.color));
            }

            $('#legendSize').val(legendStyle.fontSize == undefined ? 12 : legendStyle.fontSize);
            var fontStyle = legendStyle.fontStyle;
            if (fontStyle == 'italic') {
                $('#legendStyle').val('italic').prop("selected", true);
            } else if (fontStyle == 'oblique') {
                $('#legendStyle').val('oblique').prop("selected", true);
            } else {
                $('#legendStyle').val('normal').prop("selected", true);
            }

            $('#legend-top').val(legend.top == undefined ? 0 : legend.top);
            $('#legend-bottom').val(legend.bottom == undefined ? 0 : legend.bottom);
            //默认居中
            if (legend.left == undefined) {
                $('#legend-left').val(0);
            } else if (legend.left == 'center') {
                $('#legend-left').val('center');
            } else {
                $('#legend-left').val(legend.left);
            }

            $('#legend-right').val(legend.right == undefined ? 0 : legend.right);


            var fontWeight = legendStyle.fontWeight;
            if (fontWeight == 'bold') {
                $('#legendWeight').val('bold').prop("selected", true);
            } else {
                $('#legendWeight').val('normal').prop("selected", true);
            }

            if (legendStyle.fontFamily == undefined) {
                $('#legendFamily option:first').prop("selected", true);
            } else {
                $('#legendFamily').val(legendStyle.fontFamily).prop("selected", true);
            }


            var grid = json.grid[0];

            if (grid.backgroundColor.indexOf('RGBA') == -1) {
                if (grid.backgroundColor.indexOf('rgba') == -1) {
                    $('#gridBgInput').val(plugin.util.RgbToHex(grid.backgroundColor));
                    $('#gridBg').css("background-color", plugin.util.RgbToHex(grid.backgroundColor));
                } else {
                    $('#gridBgInput').val(plugin.util.RgbaToHex(grid.backgroundColor));
                    $('#gridBg').css("background-color", plugin.util.RgbaToHex(grid.backgroundColor));
                }

            } else {
                $('#gridBgInput').val(plugin.util.RgbaToHex(grid.backgroundColor));
                $('#gridBg').css("background-color", plugin.util.RgbaToHex(grid.backgroundColor));
            }


            if (grid.show == true) {
                $('#gridShow').val('1').prop("selected", true);
            } else {
                $('#gridShow').val('0').prop("selected", true);
            }

            $('#grid-top').val(grid.top == undefined ? 0 : grid.top);
            $('#grid-bottom').val(grid.bottom == undefined ? 0 : grid.bottom);
            $('#grid-left').val(grid.left == undefined ? 0 : grid.left);
            $('#grid-right').val(grid.right == undefined ? 0 : grid.right);
            //分类(-)
            var axis = json.xAxis[0];
            var axisLabel = axis.axisLabel;
            var axisLabelF = axisLabel.formatter;
            if(axisLabelF != undefined){
                $('#xAxisF').val(axisLabelF.substring(7));
            }
            $('#xLabelRotate').val(axisLabel.rotate); //X轴旋转角度
            var showX = axis.show;
            if (showX) {
                $('#showX').val('true').prop("selected", true);
            } else {
                $('#showX').val('false').prop("selected", true);
            }

            var boundaryGap = axis.boundaryGap;
            if (boundaryGap == undefined) {
                $('#boundaryGap').val("true").prop("selected", true);
            } else {
                if (boundaryGap) {
                    $('#boundaryGap').val("true").prop("selected", true);
                } else {
                    $('#boundaryGap').val("false").prop("selected", true);
                }
            }

            var splitLine = axis.splitLine;
            if (splitLine != undefined) {
                var showSplit = splitLine.show;
                if (showSplit) {
                    $('#showSplit').val('true').prop('selected', true);
                } else {
                    $('#showSplit').val('false').prop('selected', true);
                }

            } else {
                $('#showSplit').val("false").prop('selected', true);
            }

            if (axisLabel.textStyle != undefined && axisLabel.textStyle.color != undefined) {
                var xColor = axisLabel.textStyle.color;
                if (xColor.indexOf('RGBA') == -1) {
                    if (xColor.indexOf('rgba') == -1) {
                        $('#xColorInput').val(plugin.util.RgbToHex(xColor));//标题背景颜色
                        $('#xColor').css("background-color", plugin.util.RgbToHex(xColor));
                    } else {
                        $('#xColorInput').val(plugin.util.RgbaToHex(xColor));//标题背景颜色
                        $('#xColor').css("background-color", plugin.util.RgbaToHex(xColor));
                    }
                } else {
                    $('#xColorInput').val(plugin.util.RgbaToHex(xColor));//标题背景颜色
                    $('#xColor').css("background-color", plugin.util.RgbaToHex(xColor));
                }
            }


            $('#xLabelTextSize').val(axisLabel.fontSize);

            //分类(二)
            var axis1 = json.xAxis[1];
            var axisLabel1 = axis1.axisLabel;
            var axisLabelF1 = axisLabel1.formatter;
            if(axisLabelF1 != undefined){
                $('#xAxisF1').val(axisLabelF1.substring(7));
            }
            $('#xLabelRotate1').val(axisLabel1.rotate); //X轴旋转角度

            if (axisLabel1.textStyle != undefined && axisLabel1.textStyle.color != undefined) {
                var xColor1 = axisLabel1.textStyle.color;
                if (xColor1.indexOf('RGBA') == -1) {
                    if (xColor1.indexOf('rgba') == -1) {
                        $('#xColorInput1').val(plugin.util.RgbToHex(xColor1));//标题背景颜色
                        $('#xColor1').css("background-color", plugin.util.RgbToHex(xColor1));
                    } else {
                        $('#xColorInput1').val(plugin.util.RgbaToHex(xColor1));//标题背景颜色
                        $('#xColor1').css("background-color", plugin.util.RgbaToHex(xColor1));
                    }
                } else {
                    $('#xColorInput1').val(plugin.util.RgbaToHex(xColor1));//标题背景颜色
                    $('#xColor1').css("background-color", plugin.util.RgbaToHex(xColor1));
                }
            }


            var showX1 = axis1.show;
            if (showX1) {
                $('#showX1').val('true').prop("selected", true);
            } else {
                $('#showX1').val('false').prop("selected", true);
            }

            $('#xLabelTextSize1').val(axisLabel1.fontSize);
            //系列(一)
            var yAxis = json.yAxis[0];
            var showY = yAxis.show; //是否显示Y值
            if (showY) {
                $('#showY').val('true').prop("selected", true);
            } else {
                $('#showY').val('false').prop("selected", true);
            }
            var yAxisLabel = yAxis.axisLabel; //标签
            var yAxisLabelF = yAxisLabel.formatter;
            if(yAxisLabelF != undefined){
                $('#yAxisF').val(yAxisLabelF.substring(7));
            }
            $('#yLabelRotate').val(yAxisLabel.rotate); //X轴旋转角度

            $('#yLabelTextSize').val(yAxisLabel.fontSize);

            var splitLineY = yAxis.splitLine;
            if (splitLineY != undefined) {
                var showSplitY = splitLineY.show;
                if (showSplitY) {
                    $('#showSplitY').val('true').prop('selected', true);
                } else {
                    $('#showSplitY').val('false').prop('selected', true);
                }

            } else {
                $('#showSplitY').val("true").prop('selected', true);
            }

            if (yAxisLabel.textStyle != undefined && yAxisLabel.textStyle.color != undefined) {
                var yColor = yAxisLabel.textStyle.color;
                if (yColor.indexOf('RGBA') == -1) {
                    if (yColor.indexOf('rgba') == -1) {
                        $('#yColorInput').val(plugin.util.RgbToHex(yColor));//标题背景颜色
                        $('#yColor').css("background-color", plugin.util.RgbToHex(yColor));
                    } else {
                        $('#yColorInput').val(plugin.util.RgbaToHex(yColor));//标题背景颜色
                        $('#yColor').css("background-color", plugin.util.RgbaToHex(yColor));
                    }
                } else {
                    $('#yColorInput').val(plugin.util.RgbaToHex(yColor));//标题背景颜色
                    $('#yColor').css("background-color", plugin.util.RgbaToHex(yColor));
                }
            }


            //系列（二）
            var yAxis1 = json.yAxis[1];
            var showY1 = yAxis1.show; //是否显示Y轴
            if (showY1) {
                $('#showY1').val('true').prop("selected", true);
            } else {
                $('#showY1').val('false').prop("selected", true);
            }
            var yAxisLabel1 = yAxis1.axisLabel;
            var yAxisLabelF1 = yAxisLabel1.formatter;
            if(yAxisLabelF1 != undefined){
                $('#yAxisF1').val(yAxisLabelF1.substring(7));
            }
            $('#yLabelRotate1').val(yAxisLabel1.rotate); //X轴旋转角度
            $('#yLabelTextSize1').val(yAxisLabel1.fontSize);

            if (yAxisLabel1.textStyle != undefined && yAxisLabel1.textStyle.color != undefined){
                var yColor1 = yAxisLabel1.textStyle.color;
                if (yColor1.indexOf('RGBA') == -1) {
                    if (yColor1.indexOf('rgba') == -1) {
                        $('#yColorInput1').val(plugin.util.RgbToHex(yColor1));//标题背景颜色
                        $('#yColor1').css("background-color", plugin.util.RgbToHex(yColor1));
                    } else {
                        $('#yColorInput1').val(plugin.util.RgbaToHex(yColor1));//标题背景颜色
                        $('#yColor1').css("background-color", plugin.util.RgbaToHex(yColor1));
                    }
                } else {
                    $('#yColorInput1').val(plugin.util.RgbaToHex(yColor1));//标题背景颜色
                    $('#yColor1').css("background-color", plugin.util.RgbaToHex(yColor1));
                }
            }


            //系列折线图
            var series = json.series[0];

            //smooth属性
            var smooth = series.smooth;
            if (smooth != undefined) {
                if (smooth) {
                    $('#smooth').val('smooth').prop("selected", true);
                } else {
                    $('#smooth').val('normal').prop("selected", true);
                }
            } else {
                $('#smooth').val('normal').prop("selected", true);
            }

            //smooth属性
            var stack = json.stack;
            if (stack != undefined) {
                if (stack == 'true') {
                    $('#stack').val('stack').prop("selected", true);
                } else {
                    $('#stack').val('normal').prop("selected", true);
                }
            } else {
                $('#stack').val('normal').prop("selected", true);
            }

            var showLabel = series.label.show; //是否显示标签
            if (showLabel) {
                $('#showLabel').val('true').prop("selected", true);
            } else {
                $('#showLabel').val('false').prop("selected", true);
            }

            var series1 = json.series[1];

            //smooth属性
            var smooth1 = series1.smooth;
            if (smooth1 != undefined) {
                if (smooth1) {
                    $('#smooth1').val('smooth').prop("selected", true);
                } else {
                    $('#smooth1').val('normal').prop("selected", true);
                }
            } else {
                $('#smooth1').val('normal').prop("selected", true);
            }

            //smooth属性
            var stack1 = json.stack1;
            if (stack1 != undefined) {
                if (stack1 == 'true') {
                    $('#stack1').val('stack').prop("selected", true);
                } else {
                    $('#stack1').val('normal').prop("selected", true);
                }
            } else {
                $('#stack1').val('normal').prop("selected", true);
            }

            var showLabel1 = series.label.show; //是否显示标签
            if (showLabel1) {
                $('#showLabel1').val('true').prop("selected", true);
            } else {
                $('#showLabel1').val('false').prop("selected", true);
            }

            /*  var categoryData = json.categoryData;
             $('#category').val(categoryData);

             var seriesData = json.seriesData;
             $('#series').val(seriesData);

             var valueData = json.valueData;
             $('#value').val(valueData);

             var categoryData1 = json.categoryData1;
             $('#category1').val(categoryData1);

             var seriesData1 = json.seriesData1;
             $('#series1').val(seriesData1);

             var valueData1 = json.valueData1;
             $('#value1').val(valueData1);*/

            $('#showTip').val(String(json.tooltip[0].show)).prop('selected', true);

        },
        title: {
            isVisible: function (flag) { //设置标题是否显示
                if (plugin.instance) {
                    plugin.instance.setOption({
                        title: {
                            show: flag
                        }
                    })
                    plugin.baInstance.setOption({
                        title: {
                            show: flag
                        }
                    })
                }
            },
            changeText: function (text) {  //修改标题文本
                if (plugin.instance) {
                    plugin.instance.setOption({
                        title: {
                            text: text
                        }
                    })
                    plugin.baInstance.setOption({
                        title: {
                            text: text
                        }
                    })
                }
                $('.json-container').jsonViewer(plugin.instance.getOption());

            },
            changeBgColor: function (color) { //修改标题背景颜色
                plugin.instance.setOption({
                    title: {
                        backgroundColor: color
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        backgroundColor: color
                    }
                })
            },
            changeTitleColor: function (color) { //修改标题文本颜色
                plugin.instance.setOption({
                    title: {
                        textStyle: {
                            color: color
                        }
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        textStyle: {
                            color: color
                        }
                    }
                })
            },
            changeTitleSize: function (size) { //设置标题大小
                plugin.instance.setOption({
                    title: {
                        textStyle: {
                            fontSize: size
                        }
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        textStyle: {
                            fontSize: size
                        }
                    }
                })
            },
            changeLeft: function (px) {
                plugin.instance.setOption({
                    title: {
                        left: px
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        left: px
                    }
                })
            },
            changeRight: function (px) {
                plugin.instance.setOption({
                    title: {
                        right: px
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        right: px
                    }
                })
            },
            changeTop: function (px) {
                plugin.instance.setOption({
                    title: {
                        top: px
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        top: px
                    }
                })
            },
            changeBottom: function (px) {
                plugin.instance.setOption({
                    title: {
                        bottom: px
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        bottom: px
                    }
                })
            },
            changeFontStyle: function (style) {
                plugin.instance.setOption({
                    title: {
                        textStyle: {
                            fontStyle: style
                        }
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        textStyle: {
                            fontStyle: style
                        }
                    }
                })
            },
            changeFontWeight: function (weight) {
                plugin.instance.setOption({
                    title: {
                        textStyle: {
                            fontWeight: weight
                        }
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        textStyle: {
                            fontWeight: weight
                        }
                    }
                })
            },
            changeFont: function (val) {
                plugin.instance.setOption({
                    title: {
                        textStyle: {
                            fontFamily: val
                        }
                    }
                })
                plugin.baInstance.setOption({
                    title: {
                        textStyle: {
                            fontFamily: val
                        }
                    }
                })
            }
        },
        legend: {
            isVisible: function (flag) { //设置图例是否显示
                if (plugin.instance) {
                    plugin.instance.setOption({
                        legend: {
                            show: flag
                        }
                    })
                    plugin.baInstance.setOption({
                        legend: {
                            show: flag
                        }
                    })
                }
            },
            changeText: function (text) {  //修改图例文本
                if (plugin.instance) {
                    plugin.instance.setOption({
                        legend: {
                            text: text,
                            show: true
                        }
                    })
                    plugin.baInstance.setOption({
                        legend: {
                            text: text,
                            show: true
                        }
                    })
                }
            },
            changeBgColor: function (color) { //修改图例背景颜色
                plugin.instance.setOption({
                    legend: {
                        backgroundColor: color
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        backgroundColor: color
                    }
                })
            },
            changeTitleColor: function (color) { //修改图例文本颜色
                plugin.instance.setOption({
                    legend: {
                        textStyle: {
                            color: color
                        }
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        textStyle: {
                            color: color
                        }
                    }
                })
            },
            changeTitleSize: function (size) { //设置图例大小
                plugin.instance.setOption({
                    legend: {
                        textStyle: {
                            fontSize: size
                        }
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        textStyle: {
                            fontSize: size
                        }
                    }
                })
            },
            changeLeft: function (px) {
                plugin.instance.setOption({
                    legend: {
                        left: px
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        left: px
                    }
                })
            },
            changeRight: function (px) {
                plugin.instance.setOption({
                    legend: {
                        right: px
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        right: px
                    }
                })
            },
            changeTop: function (px) {
                plugin.instance.setOption({
                    legend: {
                        top: px
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        top: px
                    }
                })
            },
            changeBottom: function (px) {
                plugin.instance.setOption({
                    legend: {
                        bottom: px
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        bottom: px
                    }
                })
            },
            changeFontStyle: function (style) {
                plugin.instance.setOption({
                    legend: {
                        textStyle: {
                            fontStyle: style
                        }
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        textStyle: {
                            fontStyle: style
                        }
                    }
                })
            },
            changeFontWeight: function (weight) {
                plugin.instance.setOption({
                    legend: {
                        textStyle: {
                            fontWeight: weight
                        }
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        textStyle: {
                            fontWeight: weight
                        }
                    }
                })
            },
            changeFont: function (val) {
                plugin.instance.setOption({
                    legend: {
                        textStyle: {
                            fontFamily: val
                        }
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        textStyle: {
                            fontFamily: val
                        }
                    }
                })
            },
            changeOrient: function (orient) {
                plugin.instance.setOption({
                    legend: {
                        orient: orient
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        orient: orient
                    }
                })
            },
            changeType: function (type) {
                plugin.instance.setOption({
                    legend: {
                        type: type
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        type: type
                    }
                })
            },
            changeAlign: function (align) {
                plugin.instance.setOption({
                    legend: {
                        align: align
                    }
                })
                plugin.baInstance.setOption({
                    legend: {
                        align: align
                    }
                })
            }
        },
        grid: {
            isVisible: function (flag) {
                plugin.instance.setOption({
                    grid: {
                        show: flag
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        show: flag
                    }
                })
            },
            containLabel: function (flag) {
                plugin.instance.setOption({
                    grid: {
                        containLabel: flag
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        containLabel: flag
                    }
                })
            },
            changeBgColor: function (color) { //修改图例背景颜色
                plugin.instance.setOption({
                    grid: {
                        backgroundColor: color
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        backgroundColor: color
                    }
                })
            },
            changeLeft: function (px) {
                plugin.instance.setOption({
                    grid: {
                        left: px
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        left: px
                    }
                })
            },
            changeRight: function (px) {
                plugin.instance.setOption({
                    grid: {
                        right: px
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        right: px
                    }
                })
            },
            changeTop: function (px) {
                plugin.instance.setOption({
                    grid: {
                        top: px
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        top: px
                    }
                })
            },
            changeBottom: function (px) {
                plugin.instance.setOption({
                    grid: {
                        bottom: px
                    }
                })
                plugin.baInstance.setOption({
                    grid: {
                        bottom: px
                    }
                })
            }
        },
        category: {

            showX: function (val) { //是否显示x轴
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    xAxis: [{
                        show: flag
                    }, {}]
                })
                plugin.baInstance.setOption({
                    xAxis: [{
                        show: flag
                    }, {}]
                })
            },
            showX1: function (val) { //是否显示x轴
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    xAxis: [{}, {
                        show: flag
                    }]
                })
                plugin.baInstance.setOption({
                    xAxis: [{}, {
                        show: flag
                    }]
                })
            },
            xPosition: function (val) {
                plugin.instance.setOption({
                    xAxis: {
                        position: val
                    }
                })
                plugin.baInstance.setOption({
                    xAxis: {
                        position: val
                    }
                })
            },
            xLabelRotate: function (val) {
                plugin.instance.setOption({
                    xAxis: [{
                        axisLabel: {
                            rotate: val
                        }
                    }, {}]
                })
                plugin.baInstance.setOption({
                    xAxis: [{
                        axisLabel: {
                            rotate: val
                        }
                    }, {}]
                })
            },
            xLabelRotate1: function (val) {
                plugin.instance.setOption({
                    xAxis: [{},
                        , {
                            axisLabel: {
                                rotate: val
                            }
                        }]
                })
                plugin.baInstance.setOption({
                    xAxis: [{},
                        , {
                            axisLabel: {
                                rotate: val
                            }
                        }]
                })
            },
            xLabelTextSize: function (val) {
                plugin.instance.setOption({
                    xAxis: {
                        axisLabel: {
                            fontSize: val
                        }
                    }
                })
                plugin.baInstance.setOption({
                    xAxis: {
                        axisLabel: {
                            fontSize: val
                        }
                    }
                })
            },
            xLabelTextSize1: function (val) {
                plugin.instance.setOption({
                    xAxis: [{}, {
                        axisLabel: {
                            fontSize: val
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    xAxis: [{}, {
                        axisLabel: {
                            fontSize: val
                        }
                    }]
                })
            },
            xColor: function (val) { //x轴颜色
                plugin.instance.setOption({
                    xAxis: [{
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }, {}]
                })
                plugin.baInstance.setOption({
                    xAxis: [{
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }, {}]
                })
            },
            showSplit: function (val) {
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    xAxis: [{
                        splitLine: {
                            show: flag
                        }
                    }, {
                        splitLine: {
                            show: flag
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    xAxis: [{
                        splitLine: {
                            show: flag
                        }
                    }, {
                        splitLine: {
                            show: flag
                        }
                    }]
                })
            },
            boundaryGap: function (val) {
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    xAxis: [{
                        boundaryGap: flag
                    }, {
                        boundaryGap: flag
                    }]
                })
                plugin.baInstance.setOption({
                    xAxis: [{
                        boundaryGap: flag
                    }, {boundaryGap: flag}]
                })
            },
            xColor1: function (val) { //x轴颜色
                plugin.instance.setOption({
                    xAxis: [{}, {
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    xAxis: [{}, {
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }]
                })
            }
        },
        series: {
            changeStack: function (val, val1) {
                if (val1 == 'normal') {
                    flag = false;
                } else {
                    flag = true;
                }
                if (val == 'normal') { //普通
                    if(flag){
                        plugin.instance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {}]
                        })

                        plugin.baInstance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {}]
                        })
                    }else{
                        plugin.instance.setOption({
                            series: [{}, {}]
                        })

                        plugin.baInstance.setOption({
                            series: [{}, {}]
                        })
                    }

                }


                if (val == 'stack') { //堆积
                    if(flag){
                        plugin.instance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {areaStyle:{},stack:'总量'}]
                        })

                        plugin.baInstance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {areaStyle:{},stack:'总量'}]
                        })
                    }else{
                        plugin.instance.setOption({
                            series: [{areaStyle:{},stack:'总量'},{}]
                        })

                        plugin.baInstance.setOption({
                            series: [{areaStyle:{},stack:'总量'},{}]
                        })
                    }

                }

            },
            changeStack1: function (val , val1) {

                if (val1 == 'normal') {
                    flag = false;
                } else {
                    flag = true;
                }

                if (val == 'normal') { //普通折线图
                    if(true){
                        plugin.instance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {}]
                        })

                        plugin.baInstance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {}]
                        })
                    }else{
                        plugin.instance.setOption({
                            series: [{}, {}]
                        })

                        plugin.baInstance.setOption({
                            series: [{}, {}]
                        })
                    }

                }

                if (val == 'stack') { //系列2堆积
                    if(flag){
                        plugin.instance.setOption({
                            series: [ {areaStyle:{},stack:'总量'}, {areaStyle:{},stack:'总量'}]
                        })

                        plugin.baInstance.setOption({
                            series: [{areaStyle:{},stack:'总量'}, {areaStyle:{},stack:'总量'}]
                        })
                    }else{
                        plugin.instance.setOption({
                            series: [{}, {areaStyle:{},stack:'总量'}]
                        })

                        plugin.baInstance.setOption({
                            series: [{}, {areaStyle:{},stack:'总量'}]
                        })
                    }

                }
            },
            formatter: function (val) {
                var newDesc = val.replace(/\\n/g, '\n');
                plugin.instance.setOption({
                    series: [{
                        label: {
                            formatter: newDesc
                        }
                    },{}]
                })
                plugin.baInstance.setOption({
                    series: [{
                        label: {
                            formatter: newDesc
                        }
                    },{}]
                })
            },
            formatter1: function (val) {
                var newDesc = val.replace(/\\n/g, '\n');
                plugin.instance.setOption({
                    series: [{},{
                        label: {
                            formatter: newDesc
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    series: [{},{
                        label: {
                            formatter: newDesc
                        }
                    }]
                })
            },
            changeLineType: function (val, val1) {
                if (val1 == 'normal') {
                    flag = false;
                } else {
                    flag = true;
                }
                if (val == 'normal') { //普通折线图
                    plugin.instance.setOption({
                        series: [{smooth: false}, {smooth: flag}]
                    })

                    plugin.baInstance.setOption({
                        series: [{smooth: false}, {smooth: flag}]
                    })
                }


                if (val == 'smooth') { //平滑折线图
                    plugin.instance.setOption({
                        series: [{smooth: true}, {smooth: flag}]
                    })

                    plugin.baInstance.setOption({
                        series: [{smooth: true}, {smooth: flag}]
                    })
                }

            },
            changeLineType1: function (val) {

                if (val == 'normal') { //普通折线图
                    plugin.instance.setOption({
                        series: [{}, {smooth: false}]
                    })

                    plugin.baInstance.setOption({
                        series: [{}, {smooth: false}]
                    })
                }

                if (val == 'smooth') { //平滑折线图
                    plugin.instance.setOption({
                        series: [{}, {smooth: true}]
                    })

                    plugin.baInstance.setOption({
                        series: [{}, {smooth: true}]
                    })
                }
            },
            showLabel: function (val) {
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    series: [{
                        label: {
                            show: flag
                        }
                    }, {}]
                })
                plugin.baInstance.setOption({
                    series: [{
                        label: {
                            show: flag
                        }
                    }, {}]
                })
            },
            showLabel1: function (val) {
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    series: [{}, {
                        label: {
                            show: flag
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    series: [{}, {
                        label: {
                            show: flag
                        }
                    }]
                })
            }
        },
        value: {
            showY: function (val) { //是否显示Y轴
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    yAxis: [{
                        show: flag
                    }, {}]
                })
                plugin.baInstance.setOption({
                    yAxis: [{
                        show: flag
                    }, {}]
                })
            },
            showY1: function (val) { //是否显示Y轴
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    yAxis: [{}, {show: flag}]
                })
                plugin.baInstance.setOption({
                    yAxis: [{}, {show: flag}]
                })
            },
            yPosition: function (val) { //Y轴显示位置
                plugin.instance.setOption({
                    yAxis: {
                        position: val
                    }
                })
                plugin.baInstance.setOption({
                    yAxis: {
                        position: val
                    }
                })

            },
            yLabelRotate: function (val) {
                plugin.instance.setOption({
                    yAxis: [{
                        axisLabel: {
                            rotate: val
                        }
                    }, {}]
                })
                plugin.baInstance.setOption({
                    yAxis: [{
                        axisLabel: {
                            rotate: val
                        }
                    }, {}]
                })
            },
            yLabelRotate1: function (val) {
                plugin.instance.setOption({
                    yAxis: [{}, {
                        axisLabel: {
                            rotate: val
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    yAxis: [{}, {
                        axisLabel: {
                            rotate: val
                        }
                    }]
                })
            },
            yLabelTextSize: function (val) {
                plugin.instance.setOption({
                    yAxis: [{
                        axisLabel: {
                            fontSize: val
                        }
                    },
                        {}
                    ]
                })
                plugin.baInstance.setOption({
                    yAxis: [{
                        axisLabel: {
                            fontSize: val
                        }
                    },
                        {}
                    ]
                })
            },
            yLabelTextSize1: function (val) {
                plugin.instance.setOption({
                    yAxis: [{}, {
                        axisLabel: {
                            fontSize: val
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    yAxis: [{}, {
                        axisLabel: {
                            fontSize: val
                        }
                    }]
                })
            },
            yColor: function (val) { //x轴颜色
                plugin.instance.setOption({
                    yAxis: [{
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }, {}]
                })
                plugin.baInstance.setOption({
                    yAxis: [{
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }, {}]
                })
            },
            yColor1: function (val) { //x轴颜色
                plugin.instance.setOption({
                    yAxis: [{}, {
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    yAxis: [{}, {
                        axisLabel: {
                            textStyle: {
                                color: val
                            }
                        }
                    }]
                })
            },
            showSplitY: function (val) { //x轴颜色
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    yAxis: [{
                        splitLine: {
                            show: flag
                        }
                    }, {
                        splitLine: {
                            show: flag
                        }
                    }]
                })
                plugin.baInstance.setOption({
                    yAxis: [{
                        splitLine: {
                            show: flag
                        }
                    }, {
                        splitLine: {
                            show: flag
                        }
                    }]
                })
            }
        },
        toolTip: {
            show: function (val) {
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    tooltip: {
                        show: flag
                    }
                })
                plugin.baInstance.setOption({
                    tooltip: {
                        show: flag
                    }
                })
            },
            show1: function (val) {
                var flag;
                if (val == "true") {
                    flag = true;
                } else {
                    flag = false;
                }
                plugin.instance.setOption({
                    tooltip: {
                        show: flag
                    }
                })
                plugin.baInstance.setOption({
                    tooltip: {
                        show: flag
                    }
                })
            }

        },
        xAxis: {
            axisLabel: function (val) {
                plugin.instance.setOption({
                    xAxis: [{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    },{}]
                });
                plugin.baInstance.setOption({
                    xAxis: [{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    },{}]
                });
            },
            axisLabel1: function (val) {
                plugin.instance.setOption({
                    xAxis: [{},{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    }]
                });
                plugin.baInstance.setOption({
                    xAxis: [{},{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    }]
                });
            }
        },
        yAxis: {
            axisLabel: function (val) {
                plugin.instance.setOption({
                    yAxis: [{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    },{}]
                });
                plugin.baInstance.setOption({
                    yAxis: [{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    },{}]
                });
            },
            axisLabel1: function (val) {
                plugin.instance.setOption({
                    yAxis: [{},{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    }]
                });
                plugin.baInstance.setOption({
                    yAxis: [{},{
                        axisLabel: {
                            formatter: '{value}' + val
                        }
                    }]
                })
            }
        },
        changeBgColor: function (val) {
            plugin.instance.setOption({
                backgroundColor: val
            })

            plugin.baInstance.setOption({
                backgroundColor: val
            })
        }

    }
    function getOptions(){
        plugin.reSetOption(); //判断并添加自定义属性
        var baOption = plugin.baInstance.getOption(); //获取EChart基础属性
        plugin.instance.setOption({ //将基础属性当做一个字段保存进option中
            "backUpOption": baOption,
            "hasInit":1
        })
        return plugin;
    }
</script>
</html>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8"/>
    <link rel="stylesheet" href="../../lib/layui-v2.7.6/css/layui.css" media="all">
    <style>
         /* 修改radio选中状态的颜色信息 */
        .layui-form-radio:hover *, .layui-form-radioed, .layui-form-radioed > i {
            color: #0094FF !important;
        }

        .layui-form-checked[lay-skin=primary] i {
            border-color: #0094FF!important;
            background-color: #0094FF;
        }

        /* .layui-form-select .layui-input {
            background-color: #f2f3f5 !important;
        } */
        .layui-form-select dl dd.layui-this {
            background-color: #0094FF !important;
        }
        .layui-form-select dl dd:hover {
            background-color: #0094FF !important;
        }

        .layui-form-onswitch {
            border-color: #1E9FFF !important;
            background-color: #1E9FFF !important;
        }
    </style>
</head>
<body>
<div class="x-body layui-anim layui-anim-up" style="width: 400px; margin:auto;">
    <div style="height: 30px;"></div>
    <form class="layui-form" action="">
        <div class="layui-form-item">
            <label class="layui-form-label">模板状态</label>
            <div class="layui-input-block">
                <input type="radio" name="status" value="0" title="全部" checked>
                <input type="radio" name="status" value="1" title="正常" >
                <input type="radio" name="status" value="2" title="禁用" >
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">操作人</label>
            <div class="layui-input-block" style="width:188px;">
                <select name="operator" id="operator">

                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">开始时间</label>
            <div class="layui-input-inline">
                <input type="text" name="start" class="layui-input" id="start" autocomplete="off">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">结束时间</label>
            <div class="layui-input-inline">
                <input type="text" name="end"  class="layui-input" id="end" autocomplete="off">
            </div>
        </div>
        <div class="layui-form-item" style="height:100px;">
        </div>

        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn layui-btn-normal" lay-submit lay-filter="queryForm">查询</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>
</body>
<script src="../../lib/jquery-3.4.1/jquery-3.4.1.min.js"></script>
<script src="../../lib/layui-v2.7.6/layui.js" charset="utf-8"></script>
<script src="../../js/common.js" charset="utf-8"></script>
<script type="text/javascript">
    var base = "";
    var token = "";
    $(function(){
        let server_base_url = window.sessionStorage.getItem("ef_server_base_url");
        base = server_base_url;
        let tokn = window.sessionStorage.getItem("cur_token");
        token = tokn;
    });

    layui.use('laydate', function(){
        var laydate = layui.laydate;

        //执行一个laydate实例
        laydate.render({
            elem: '#start', //指定元素
            trigger: 'click', //添加这一行来处理
            done: function(value, date, endDate){

            }
        });

        //执行一个laydate实例
        laydate.render({
            elem: '#end', //指定元素
            trigger: 'click', //添加这一行来处理
            done: function(value, date, endDate){

            }
        });
    })

    layui.use('form' , function(){
        var form = layui.form;
        //监听提交
        form.on('submit(queryForm)', function(data){
            if(data.field.start != ''&&data.field.end != ''){
                if(data.field.start > data.field.end){
                    layer.msg('开始日期不能大于结束日期');
                    return false;
                }
            }
            window.parent.setFilterData(data.field);
            window.parent.reloadTable(data.field);

            return false;
        });

        jQuery(document).ready(function(){
            let efurl = base + "/template/getOperators?token=" + token;
            jQuery.ajax({
                url: efurl,
                type: 'post',
                success:function(res){
                    jQuery('#operator').empty();
                    jQuery('#operator').append('<option>全部用户</option>');
                    jQuery.each(res , function(index ,ele){
                        jQuery('#operator').append('<option value="'+ ele.id +'">'+ ele.name +'</option>')
                    });
                    form.render();
                },
                error:function(){

                }
            })
        })
    });
</script>
</html>